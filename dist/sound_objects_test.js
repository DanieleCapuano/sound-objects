/*! For license information please see sound_objects_test.js.LICENSE.txt */
(()=>{"use strict";var t={883:(t,e,r)=>{t.exports=r.p+"e616805b4f7ed3c5612d.js"},747:(t,e,r)=>{t.exports=r.p+"9205aef800ab711a16e9.js"}},e={};function r(n){var a=e[n];if(void 0!==a)return a.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.m=t,r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),r.b=document.baseURI||self.location.href,(()=>{var t={};r.r(t),r.d(t,{AM:()=>v,default:()=>y});var e={};r.r(e),r.d(e,{Crossfading:()=>x,default:()=>j});var n={};r.r(n),r.d(n,{FM:()=>T,default:()=>F});var a={};r.r(a),r.d(a,{CHPhaser:()=>P,default:()=>V});var i={};r.r(i),r.d(i,{RM:()=>Y,default:()=>H});var o={};r.r(o),r.d(o,{WS:()=>B,default:()=>J});var c={};r.r(c),r.d(c,{FM1c2m:()=>at,default:()=>it});var s={};r.r(s),r.d(s,{FM1c2sm:()=>ut,default:()=>pt});var u={};r.r(u),r.d(u,{FM2c1m:()=>ft,default:()=>mt});var p={};r.r(p),r.d(p,{FMAcim:()=>yt,default:()=>bt});var d={};r.r(d),r.d(d,{FMselfc:()=>Et,default:()=>xt});var l=function(t,e,r){var n=new DocumentFragment;return Object.keys(t.opts).forEach((function(r){var a=m(t,e,r,"param"),i=m(t,e,r,"enum");a&&n.appendChild(a),i&&n.appendChild(i)})),r&&n.appendChild(r(t,e)),n},h=function(t,e,r,n){var a=t||new DocumentFragment;return Object.keys(e.opts).forEach((function(t){var n=m(e,r,t,"param"),i=m(e,r,t,"enum");n&&a.appendChild(n),i&&a.appendChild(i)})),n&&a.appendChild(n(e,r)),a},f=function(t){return{values:["sine","triangle","square","sawtooth"],onchange:function(e){return t.type=e}}};function m(t,e,r,n){var a={param:_,enum:g},i=t.opts[r+"_"+n];if(!i)return null;var o=document.createElement("div");return o.classList.add("container"),(i=Array.isArray(i)?i:[i]).forEach((function(c,s){var u=a[n](t,e,r,c,1===i.length?void 0:s);o.appendChild(u)})),o}function _(t,e,r,n,a){var i=e.ctx,o=n.value||t.opts[r],c=document.createElement("div");c.classList.add("container","param",r);var s=document.createElement("div");s.classList.add("label"),s.textContent=r+(void 0!==a?"-"+a:"");var u=document.createElement("input");return u.classList.add("input-val"),u.setAttribute("type","number"),u.setAttribute("min","0"),u.setAttribute("step","0.1"),u.value=o,u.addEventListener("change",(function(){var e=t.opts[r+"_param"];e&&(e.cancelScheduledValues(i.currentTime),e.setValueAtTime(u.value,i.currentTime))})),c.appendChild(s),c.appendChild(u),c}function g(t,e,r,n,a){var i=n.value||t.opts[r],o=document.createElement("div");o.classList.add("container","enum",r);var c=document.createElement("div");c.classList.add("label"),c.textContent=r+(void 0!==a?"-"+a:"");var s=null;return"int"===n.values?((s=document.createElement("input")).classList.add("input-val"),s.setAttribute("type","number"),s.setAttribute("min","0"),s.setAttribute("step","0.1"),s.value=i,s.addEventListener("change",(function(){n.onchange(s.value)}))):Array.isArray(n.values)&&(s=document.createElement("select"),n.values.forEach((function(t){var e=document.createElement("option");e.value=t,e.textContent=t,s.appendChild(e)})),s.addEventListener("change",(function(){n.onchange(s.value)}))),s?(o.appendChild(c),o.appendChild(s),o):null}var v=function(t){Object.assign(this,{mod:{},opts:Object.assign({carrier_freq:220,carrier_type:"sine",modulator_freq:10,modulator_type:"sine",carrier_g:.8,modulator_g:2},t||{}),init:b.bind(this),start:q.bind(this),stop:w.bind(this)})};const y=v;function b(t){var e=t.ctx,r=t.master_g,n=e.createGain(),a=e.createOscillator(),i=e.createGain(),o=e.createOscillator(),c=e.createGain();return a.frequency.value=this.opts.carrier_freq,this.opts.carrier_freq_param=a.frequency,o.frequency.value=this.opts.modulator_freq,this.opts.modulator_freq_param=o.frequency,a.type=this.opts.carrier_type,this.opts.carrier_type_enum=f(a),o.type=this.opts.modulator_type,this.opts.modulator_type_enum=f(o),i.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=i.gain,c.gain.value=this.opts.modulator_g,this.opts.modulator_g_param=c.gain,o.connect(c).connect(i.gain),a.connect(i).connect(n).connect(r),Object.assign(this.mod,{g:n,carrier:a,c_g:i,modulator:o,m_g:c}),window.AM=this.mod,t.show_docfrag?l(this,t):this}function q(t){var e=this.mod;[e.carrier,e.modulator].forEach((function(t){return t.start()}))}function w(t){var e=this.mod;[e.carrier,e.modulator].forEach((function(t){return t.stop()}))}function O(t){return t}var E=null,x=function(t){Object.assign(this,{mod:{},opts:Object.assign({osc1_freq:220,osc1_type:"sine",osc2_freq:110,osc2_type:"sine",cf_amount:.5},t||{}),init:L.bind(this),start:C.bind(this),stop:A.bind(this)})};const j=x;function L(t){var e=this,n=t.ctx,a=t.master_g,i=n.createOscillator();i.frequency.value=this.opts.osc1_freq,this.opts.osc1_freq_param=i.frequency,i.type=this.opts.osc1_type,this.opts.osc1_type_enum=f(i);var o=n.createOscillator();o.frequency.value=this.opts.osc2_freq,this.opts.osc2_freq_param=o.frequency,o.type=this.opts.osc2_type,this.opts.osc2_type_enum=f(o);var c=new O(new URL(r(883),r.b));n.audioWorklet.addModule(c).then((function(){var r=new AudioWorkletNode(n,"crossfading-processor",{numberOfInputs:2,numberOfOutputs:2}),c=r.parameters.get("amount");if(c.value=e.opts.cf_amount,e.opts.cf_amount_param=c,i.connect(r),o.connect(r,0,1),r.connect(a),Object.assign(e.mod,{cfpNode:r}),t.show_docfrag&&t.container){var s=h(E,{opts:{cf_amount:e.opts.cf_amount,cf_amount_param:e.opts.cf_amount_param}},t);t.container.appendChild(s)}})),window.Crossfading=this.mod,Object.assign(this.mod,{osc_1:i,osc_2:o});var s=this;return t.show_docfrag&&(s=E=l(this,t)),s}function C(t){var e=this.mod;[e.osc_1,e.osc_2].forEach((function(t){return t.start()}))}function A(t){var e=this.mod;[e.osc_1,e.osc_2].forEach((function(t){return t.stop()}))}var T=function(t){Object.assign(this,{mod:{},opts:Object.assign({carrier_freq:220,carrier_type:"sine",modulator_freq:10,modulator_type:"sine",d_gain:40,carrier_g:.8},t||{}),init:S.bind(this),start:M.bind(this),stop:G.bind(this)})};const F=T;function S(t){var e=this,r=t.ctx,n=t.master_g,a=r.createOscillator(),i=r.createGain(),o=r.createOscillator(),c=r.createGain();return a.frequency.value=this.opts.carrier_freq,o.frequency.value=this.opts.modulator_freq,this.opts.modulator_freq_param=o.frequency,a.type=this.opts.carrier_type,this.opts.carrier_type_enum=f(a),o.type=this.opts.modulator_type,this.opts.modulator_type_enum=f(o),c.gain.value=this.opts.d_gain,this.opts.d_gain_param=c.gain,i.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=i.gain,o.connect(c).connect(a.frequency),a.connect(i).connect(n),Object.assign(this.mod,{carrier:a,c_g:i,modulator:o,d:c,change_i:function(t,e){return o.frequency.value=e||o.frequency.value,c.gain.value=o.frequency.value*t,{d_gain:c.gain.value}},change_i_exp:function(t,e,n){o.frequency.value=e||o.frequency.value;var a=o.frequency.value*t;return c.gain.cancelScheduledValues(r.currentTime),c.gain.setValueAtTime(c.gain.value,r.currentTime),c.gain.exponentialRampToValueAtTime(a,r.currentTime+n),{d_gain:c.gain.value}},change_pitch:function(t){a.frequency.value=t;var r=t*o.frequency.value/a.frequency.value,n=c.gain.value/o.frequency.value;return{mod_freq:r,ratio_tobe_kept:n,d_gain:e.mod.change_i(n,r).d_gain}},change_pitch_exp:function(t,n){a.frequency.setValueAtTime(a.frequency.value,r.currentTime),a.frequency.exponentialRampToValueAtTime(t,r.currentTime+n);var i=t*o.frequency.value/a.frequency.value,s=c.gain.value/o.frequency.value;return{mod_freq:i,ratio_tobe_kept:s,d_gain:e.mod.change_i_exp(s,i,n).d_gain}}}),window.FM=this.mod,t.show_docfrag?l(this,t,k):this}function M(t){var e=this.mod;[e.carrier,e.modulator].forEach((function(t){return t.start()}))}function G(t){var e=this.mod;[e.carrier,e.modulator].forEach((function(t){return t.stop()}))}function k(t,e){var r=new DocumentFragment;return["change_i","change_pitch"].forEach((function(e){var n=document.createElement("div");n.classList.add("container");var a=document.createElement("div");a.classList.add("label"),a.textContent=e;var i="change_i"===e?function(){var e=document.createElement("div");return e.classList.add("container","container-opts","change-i"),["ratio","time"].forEach((function(r){var n=document.createElement("div");n.classList.add("opt-container",r);var a=document.createElement("div");a.textContent=r;var i=document.createElement("input");i.classList.add("input-val"),i.value="ratio"===r?t.mod.d.gain.value/t.mod.modulator.frequency.value:0,i.setAttribute("type","number"),i.setAttribute("min","0"),i.setAttribute("step","time"===r?"1":"0.1"),i.addEventListener("change",(function(){var r=N(e),n=parseInt(r.querySelector(".change-i > .time > .input-val").value),a=parseFloat(r.querySelector(".change-i > .ratio > .input-val").value),i=r.querySelector(".d_gain > .input-val"),o=t.mod.modulator.frequency.value,c=t.mod[n?"change_i_exp":"change_i"](a,o,n).d_gain;i.value=c})),n.appendChild(a),n.appendChild(i),e.appendChild(n)})),e}():function(){var e=document.createElement("div");return e.classList.add("container","container-opts","change-pitch"),["carrier_freq","time"].forEach((function(r){var n=document.createElement("div");n.classList.add("opt-container",r);var a=document.createElement("div");a.textContent=r;var i=document.createElement("input");i.classList.add("input-val"),i.value="carrier_freq"===r?t.mod.carrier.frequency.value:0,i.setAttribute("type","number"),i.setAttribute("min","0"),i.setAttribute("step","time"===r?"1":"0.1"),i.addEventListener("change",(function(){var r=N(e),n=parseInt(r.querySelector(".change-pitch > .time > .input-val").value),a=parseFloat(r.querySelector(".change-pitch > .carrier_freq > .input-val").value),i=r.querySelector(".change-i > .ratio > .input-val"),o=r.querySelector(".modulator_freq > .input-val"),c=r.querySelector(".d_gain > .input-val"),s=t.mod[n?"change_pitch_exp":"change_pitch"](a,n),u=s.ratio_tobe_kept,p=s.mod_freq,d=s.d_gain;i.value=u,o.value=p,c.value=d})),n.appendChild(a),n.appendChild(i),e.appendChild(n)})),e}();n.appendChild(a),n.appendChild(i),r.appendChild(n)})),r}function N(t){return t.classList.contains("controls")||t.classList.contains("main-container")?t:N(t.parentElement)}var I=null,P=function(t){Object.assign(this,{mod:{},opts:Object.assign({osc_freq:220,osc_type:"sine",chp_freq:5.7},t||{}),init:R.bind(this),start:W.bind(this),stop:D.bind(this)})};const V=P;function R(t){var e=this,n=t.ctx,a=t.master_g,i=new O(new URL(r(747),r.b));n.audioWorklet.addModule(i).then((function(){var r=new AudioWorkletNode(n,"ch-phaser-processor",{numberOfOutputs:1,outputChannelCount:[2]}),i=r.parameters.get("frequency");if(i.value=e.opts.chp_freq,e.opts.chp_freq_param=i,o.connect(r).connect(a),Object.assign(e.mod,{chpNode:r}),t.show_docfrag&&t.container){var c=h(I,{opts:{chp_freq:e.opts.chp_freq,chp_freq_param:e.opts.chp_freq_param}},t);t.container.appendChild(c)}}));var o=n.createOscillator();o.frequency.value=this.opts.osc_freq,this.opts.osc_freq_param=o.frequency,o.type=this.opts.osc_type,this.opts.osc_type_enum=f(o),window.CHPhaser=this.mod,Object.assign(this.mod,{osc:o});var c=this;return t.show_docfrag&&(c=I=l(this,t)),c}function W(t){this.mod.osc.start()}function D(t){this.mod.osc.stop()}var Y=function(t){return Object.assign(this,{mod:{},opts:Object.assign({carrier_freq:220,carrier_type:"sine",modulator_freq:10,modulator_type:"sine",carrier_g:.8,modulator_g:2},t||{}),init:U.bind(this),start:$.bind(this),stop:z.bind(this)})};const H=Y;function U(t){var e=t.ctx,r=t.master_g,n=e.createOscillator(),a=e.createGain(),i=e.createOscillator(),o=e.createGain();return n.frequency.value=this.opts.carrier_freq,this.opts.carrier_freq_param=n.frequency,i.frequency.value=this.opts.modulator_freq,this.opts.modulator_freq_param=i.frequency,n.type=this.opts.carrier_type,this.opts.carrier_type_enum=f(n),i.type=this.opts.modulator_type,this.opts.modulator_type_enum=f(i),a.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=a.gain,o.gain.value=this.opts.modulator_g,this.opts.modulator_g_param=o.gain,i.connect(o).connect(a),n.connect(a).connect(r),Object.assign(this.mod,{carrier:n,c_g:a,modulator:i,m_g:o}),window.RM=this.mod,t.show_docfrag?l(this,t):this}function $(t){var e=this.mod;[e.carrier,e.modulator].forEach((function(t){return t.start()}))}function z(t){var e=this.mod;[e.carrier,e.modulator].forEach((function(t){return t.stop()}))}var B=function(t){Object.assign(this,{mod:{},opts:Object.assign({carrier_freq:220,carrier_type:"sine",carrier_g:1,shaping_amount:4,shaping_harmonics:[.1,.1,.1,.1,.1],shaping_fn:"distortion"},t||{}),init:K.bind(this),start:rt.bind(this),stop:nt.bind(this)})};const J=B;function K(t){var e=this,r=t.ctx,n=t.master_g,a=r.createWaveShaper(),i=r.createOscillator(),o=r.createGain();i.frequency.value=this.opts.carrier_freq,this.opts.carrier_freq_param=i.frequency,i.type=this.opts.carrier_type,this.opts.carrier_type_enum=f(i),o.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=o.gain;var c=this.opts.shaping_harmonics.length,s=this.opts.shaping_harmonics,u=this.opts.shaping_amount,p={distortion:{fn:X,set_args:function(t,r){return t.bind(null,parseFloat(r||e.opts.shaping_amount))}},chebishev:{fn:Z,set_args:function(t,e){return Object.assign(t.bind(null,c,s.map((function(t){return t*parseFloat(e||1)}))),Object.assign({},tt))}}},d=p[this.opts.shaping_fn];return a.curve=Q(r,d.set_args(d.fn)),this.opts.shaping_harmonics_enum=s.map((function(t,e){return{values:"int",value:t,onchange:function(t){s[e]=parseFloat(t),a.curve=Q(r,d.set_args(d.fn,u))}}})),this.opts.shaping_amount_enum={values:"int",onchange:function(t){u=parseFloat(t),a.curve=Q(r,d.set_args(d.fn,u))}},this.opts.shaping_fn_enum={values:["distortion","chebishev"],onchange:function(t){d=p[t],a.curve=Q(r,d.set_args(d.fn,u))}},i.connect(o).connect(a).connect(n),Object.assign(this.mod,{carrier:i,c_g:o,ws:a}),window.WS=this.mod,t.show_docfrag?l(this,t):this}function Q(t,e){var r=t.sampleRate,n=new Float32Array(r);e.init_processing&&e.init_processing(e);for(var a=0;a<r;a++){var i=2*a/r-1;n[a]=e(i),e.step_processing&&e.step_processing(e,n[a])}return e.post_processing?e.post_processing(e,n):n}function X(t,e){var r="number"==typeof t?t:50;return(3+r)*e*20*(Math.PI/180)/(Math.PI+r*Math.abs(e))}function Z(t,e,r){var n=function(r){for(var n=et(1,r),a=2;a<t+2;a++)n+=e[a-2]*et(a,r);return n};return n(r)-n(0)}var tt={f1_max:Number.NEGATIVE_INFINITY,init_processing:function(t){return t.f1_max=Number.NEGATIVE_INFINITY},step_processing:function(t,e){return t.f1_max=Math.max(t.f1_max,e)},post_processing:function(t,e){for(var r=0;r<e.length;r++)e[r]/=t.f1_max;return e}};function et(t,e){return 0===t?1:1===t?e:2*e*et(t-1,e)+et(t-2,e)}function rt(t){this.mod.carrier.start()}function nt(t){this.mod.carrier.stop()}var at=function(t){Object.assign(this,{mod:{},opts:Object.assign({modulator1_freq:7,modulator1_type:"sine",d1_gain:40,modulator2_freq:22,modulator2_type:"sine",d2_gain:20,mods_g:1,carrier_freq:100,carrier_type:"sine",carrier_g:1},t||{}),init:ot.bind(this),start:ct.bind(this),stop:st.bind(this)})};const it=at;function ot(t){var e=t.ctx,r=t.master_g,n=e.createOscillator(),a=e.createGain(),i=e.createOscillator(),o=e.createGain(),c=e.createGain(),s=e.createOscillator(),u=e.createGain();return n.frequency.value=this.opts.modulator1_freq,this.opts.modulator1_freq_param=n.frequency,a.gain.value=this.opts.d1_gain,this.opts.d1_gain_param=a.gain,i.frequency.value=this.opts.modulator2_freq,this.opts.modulator2_freq_param=i.frequency,o.gain.value=this.opts.d2_gain,this.opts.d2_gain_param=o.gain,c.gain.value=this.opts.mods_g,this.opts.mods_g_param=c.gain,s.frequency.value=this.opts.carrier_freq,this.opts.carrier_freq_param=s.frequency,u.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=u.gain,s.type=this.opts.carrier_type,this.opts.carrier_type_enum=f(s),n.type=this.opts.modulator1_type,this.opts.modulator1_type_enum=f(n),i.type=this.opts.modulator2_type,this.opts.modulator2_type_enum=f(i),n.connect(a),i.connect(o),a.connect(c),o.connect(c.gain),c.connect(s.frequency),s.connect(u),u.connect(r),Object.assign(this.mod,{m1:n,d1:a,m2:i,d2:o,mods_g:c,c:s,g:u}),window.FM1c2m=this.mod,t.show_docfrag?l(this,t):this}function ct(t){var e=this.mod;[e.m1,e.m2,e.c].forEach((function(t){return t.start()}))}function st(t){var e=this.mod;[e.m1,e.m2,e.c].forEach((function(t){return t.stop()}))}var ut=function(t){Object.assign(this,{mod:{},opts:Object.assign({modulator1_freq:7,modulator1_type:"sine",d1_gain:40,modulator2_freq:22,modulator2_type:"sine",d2_gain:20,mods_g:1,carrier_freq:100,carrier_type:"sine",carrier_g:1},t||{}),init:dt.bind(this),start:lt.bind(this),stop:ht.bind(this)})};const pt=ut;function dt(t){var e=t.ctx,r=t.master_g,n=e.createOscillator(),a=e.createGain(),i=e.createOscillator(),o=e.createGain(),c=e.createGain(),s=e.createOscillator(),u=e.createGain();return n.frequency.value=this.opts.modulator1_freq,this.opts.modulator1_freq_param=n.frequency,a.gain.value=this.opts.d1_gain,this.opts.d1_gain_param=a.gain,i.frequency.value=this.opts.modulator2_freq,this.opts.modulator2_freq_param=i.frequency,o.gain.value=this.opts.d2_gain,this.opts.d2_gain_param=o.gain,c.gain.value=this.opts.mods_g,this.opts.mods_g_param=c.gain,s.frequency.value=this.opts.carrier_freq,this.opts.carrier_freq_param=s.frequency,s.type=this.opts.carrier_type,this.opts.carrier_type_enum=f(s),n.type=this.opts.modulator1_type,this.opts.modulator1_type_enum=f(n),i.type=this.opts.modulator2_type,this.opts.modulator2_type_enum=f(i),u.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=u.gain,n.connect(a),i.connect(o),a.connect(i.frequency),o.connect(c),c.connect(s.frequency),s.connect(u),u.connect(r),Object.assign(this.mod,{m1:n,d1:a,m2:i,d2:o,mods_g:c,c:s,g:u}),window.FM1c2sm=this.mod,t.show_docfrag?l(this,t):this}function lt(t){var e=this.mod;[e.m1,e.m2,e.c].forEach((function(t){return t.start()}))}function ht(t){var e=this.mod;[e.m1,e.m2,e.c].forEach((function(t){return t.stop()}))}var ft=function(t){Object.assign(this,{mod:{},opts:Object.assign({modulator_freq:7,modulator_type:"sine",d_gain:40,carrier1_freq:200,carrier1_type:"sine",carrier2_freq:40,carrier2_type:"sine",carrier_g:.1},t||{}),init:_t.bind(this),start:gt.bind(this),stop:vt.bind(this)})};const mt=ft;function _t(t){var e=t.ctx,r=t.master_g,n=e.createOscillator(),a=e.createGain(),i=e.createOscillator(),o=e.createOscillator(),c=e.createGain();return n.frequency.value=this.opts.modulator_freq,this.opts.modulator_freq_param=n.frequency,a.gain.value=this.opts.d_gain,this.opts.d_gain_param=a.gain,i.frequency.value=this.opts.carrier1_freq,this.opts.carrier1_freq_param=i.frequency,o.frequency.value=this.opts.carrier2_freq,this.opts.carrier2_freq_param=o.frequency,c.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=c.gain,n.type=this.opts.modulator_type,this.opts.modulator_type_enum=f(n),i.type=this.opts.carrier1_type,this.opts.carrier1_type_enum=f(i),o.type=this.opts.carrier2_type,this.opts.carrier2_type_enum=f(o),n.connect(a),a.connect(i.frequency),a.connect(o.frequency),i.connect(c),o.connect(c.gain),c.connect(r),Object.assign(this.mod,{m:n,d:a,c1:i,c2:o,g:c}),window.FM2c1m=this.mod,t.show_docfrag?l(this,t):this}function gt(t){var e=this.mod;[e.m,e.c1,e.c2].forEach((function(t){return t.start()}))}function vt(t){var e=this.mod;[e.m,e.c1,e.c2].forEach((function(t){return t.stop()}))}var yt=function(t){Object.assign(this,{mod:{},opts:Object.assign({m1_carrier_freq:80,m1_modulatr_freq:20,m1_d_gain:10,m1_carrier_g:.8,m2_carrier_freq:120,m2_modulator_freq:22,m2_d_gain:10,m2_carrier_g:.8,inst_g:1},t||{}),init:qt.bind(this),start:wt.bind(this),stop:Ot.bind(this)})};const bt=yt;function qt(t){var e=t.ctx,r=t.master_g,n=e.createGain(),a=new T({carrier_freq:this.opts.m1_carrier_freq,modulator_freq:this.opts.m1_modulatr_freq,d_gain:this.opts.m1_d_gain,master_g:n,show_docfrag:t.show_docfrag}),i=new T({carrier_freq:this.opts.m2_carrier_freq,modulator_freq:this.opts.m2_modulator_freq,d_gain:this.opts.m2_d_gain,master_g:n.gain,show_docfrag:t.show_docfrag});n.gain.value=this.opts.inst_g;var o=a.init(t),c=i.init(t);return n.connect(r),Object.assign(this.mod,{m1:a,m2:i}),window.FMAcim=this.mod,t.show_docfrag?function(t,e,r,n){var a=new DocumentFragment;return[r,n].forEach((function(t,e){var r=document.createElement("div"),n=e+1;r.classList.add("main-container","opt-container","fm-acim","mod-"+n);var i=document.createElement("div");i.classList.add("label"),i.textContent="FM MOD "+n,r.appendChild(i),r.appendChild(t),a.appendChild(r)})),a}(0,0,o,c):this}function wt(t){var e=this;Object.keys(this.mod).forEach((function(t){var r=e.mod[t].mod;[r.carrier,r.modulator].forEach((function(t){return t.start()}))}))}function Ot(t){var e=this;Object.keys(this.mod).forEach((function(t){var r=e.mod[t].mod;[r.carrier,r.modulator].forEach((function(t){return t.stop()}))}))}var Et=function(t){Object.assign(this,{mod:{},opts:Object.assign({mod_g:1,carrier_freq:100,carrier_type:"sine",carrier_g:1},t||{}),init:jt.bind(this),start:Lt.bind(this),stop:Ct.bind(this)})};const xt=Et;function jt(t){var e=t.ctx,r=t.master_g,n=e.createGain(),a=e.createOscillator(),i=e.createGain();return n.gain.value=this.opts.mod_g,this.opts.mod_g_param=n.gain,a.frequency.value=this.opts.carrier_freq,this.opts.carrier_freq_param=a.frequency,a.type=this.opts.carrier_type,this.opts.carrier_type_enum=f(a),i.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=i.gain,a.connect(i),i.connect(n),n.connect(a.frequency),i.connect(r),Object.assign(this.mod,{c:a,g:i,mod_g:n}),window.FM_selfc=this.mod,t.show_docfrag?l(this,t):this}function Lt(t){this.mod.c.start()}function Ct(t){this.mod.c.stop()}function At(t){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},At(t)}function Tt(){Tt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,a){var i=e&&e.prototype instanceof l?e:l,o=Object.create(i.prototype),c=new x(a||[]);return n(o,"_invoke",{value:q(t,r,c)}),o}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var d={};function l(){}function h(){}function f(){}var m={};s(m,i,(function(){return this}));var _=Object.getPrototypeOf,g=_&&_(_(j([])));g&&g!==e&&r.call(g,i)&&(m=g);var v=f.prototype=l.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function a(n,i,o,c){var s=p(t[n],t,i);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==At(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){a("next",t,o,c)}),(function(t){a("throw",t,o,c)})):e.resolve(d).then((function(t){u.value=t,o(u)}),(function(t){return a("throw",t,o,c)}))}c(s.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){a(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function q(t,e,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return{value:void 0,done:!0}}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var c=w(o,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=p(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function w(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=p(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,d;var i=a.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,n(v,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:h,configurable:!0}),h.displayName=s(f,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,c,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},y(b.prototype),s(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var o=new b(u(e,r,n,a),i);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},y(v),s(v,c,"Generator"),s(v,i,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;E(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},t}function Ft(t,e,r,n,a,i,o){try{var c=t[i](o),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,a)}function St(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function o(t){Ft(i,n,a,o,c,"next",t)}function c(t){Ft(i,n,a,o,c,"throw",t)}o(void 0)}))}}var Mt={};Mt.WS=o,Mt.RM=i,Mt.FuzzyPhaser=a,Mt.FM=n,Mt.Crossfading=e,Mt.AM=t;var Gt=Mt,kt={};kt.FMselfc=d,kt.FMAcim=p,kt.FM2c1m=u,kt.FM1c2sm=s,kt.FM1c2m=c;var Nt=kt,It={};window.addEventListener("load",(function(){var t=document.querySelector(".trigger-btn"),e=document.querySelector(".selector"),r=document.querySelector(".controls"),n=Object.keys(Gt).concat(Object.keys(Nt)).reduce((function(t,e){return t[e]=(Gt[e]||Nt[e]).default,t}),{});e.innerHTML=Object.keys(n).map((function(t){return'<option value="'+t+'">'+t+"</option>"})).join(""),e.selectedIndex=0;var a={},i=function(){},o=function(){},c=function(){},s=function(){a=new n[e.value],i=a.init,o=a.start,c=a.stop};e.addEventListener("change",s),s();var u,p,d=!1;t.addEventListener("click",St(Tt().mark((function t(){var n;return Tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d)console.info("Stopping module..."),u.gain.setValueAtTime(u.gain.value,p.currentTime),u.gain.exponentialRampToValueAtTime(1e-9,p.currentTime+.25),setTimeout((function(){c(It),It.master_g.disconnect()}),300);else{for(It.ctx=It.ctx||new AudioContext,It.master_g=It.master_g||It.ctx.createGain(),It.master_g.connect(It.ctx.destination),It.show_docfrag=!0,It.container=r,u=It.master_g,p=It.ctx,console.info("Init module..."),n=i(It);r.firstChild;)r.removeChild(r.firstChild);r.appendChild(n),console.info("Starting module..."),u.gain.setValueAtTime(1e-7,p.currentTime),o(It),u.gain.exponentialRampToValueAtTime(1,p.currentTime+.25)}d=!d,e.disabled=d;case 3:case"end":return t.stop()}}),t)}))))}))})()})();