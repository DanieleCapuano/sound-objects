!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.soundo=e():t.soundo=e()}(self,(()=>(()=>{"use strict";var t={m:{},d:(e,r)=>{for(var a in r)t.o(r,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:r[a]})},u:t=>t+".soundo.js"};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),t.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var r=t.g.document;if(!e&&r&&(r.currentScript&&(e=r.currentScript.src),!e)){var a=r.getElementsByTagName("script");a.length&&(e=a[a.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),t.b=document.baseURI||self.location.href;var e={};t.r(e),t.d(e,{default:()=>$t,instruments:()=>Ut,operators:()=>Dt});var r={};t.r(r),t.d(r,{AM:()=>b,default:()=>O});var a={};t.r(a),t.d(a,{FM:()=>x,default:()=>C});var n={};t.r(n),t.d(n,{CHPhaser:()=>k,default:()=>I});var i={};t.r(i),t.d(i,{LinearCrossfading:()=>V,default:()=>D});var o={};t.r(o),t.d(o,{MixCrossfading:()=>Y,default:()=>B});var s={};t.r(s),t.d(s,{RM:()=>X,default:()=>Z});var c={};t.r(c),t.d(c,{WS:()=>at,default:()=>nt});var u={};t.r(u),t.d(u,{FM1c2m:()=>_t,default:()=>ht});var p={};t.r(p),t.d(p,{FM1c2sm:()=>vt,default:()=>yt});var d={};t.r(d),t.d(d,{FM2c1m:()=>wt,default:()=>Et});var m={};t.r(m),t.d(m,{FMAcim:()=>Mt,default:()=>At});var _={};function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}t.r(_),t.d(_,{FMselfc:()=>Gt,default:()=>Tt});var f=function(t,e,r){var a=new DocumentFragment;return Object.keys(t.opts).forEach((function(r){var n=v(t,e,r,"param"),i=v(t,e,r,"enum");n&&a.appendChild(n),i&&a.appendChild(i)})),r&&a.appendChild(r(t,e)),a},l=function(t,e,r,a){var n=t||new DocumentFragment;return Object.keys(e.opts).forEach((function(t){var a=v(e,r,t,"param"),i=v(e,r,t,"enum");a&&n.appendChild(a),i&&n.appendChild(i)})),a&&n.appendChild(a(e,r)),n},g=function(t){return{values:["sine","triangle","square","sawtooth"],onchange:function(e){return t.type=e}}};function v(t,e,r,a){var n={param:y,enum:q},i=t.opts[r+"_"+a];if(!i)return null;var o=document.createElement("div");return o.classList.add("container"),(i=Array.isArray(i)?i:[i]).forEach((function(s,c){var u=n[a](t,e,r,s,1===i.length?void 0:c);o.appendChild(u)})),o}function y(t,e,r,a,n){var i=e.ctx,o=t.opts[r],s=a.value||o;"object"===h(s)&&(s=s.value);var c=document.createElement("div");c.classList.add("container","param",r);var u=document.createElement("div");u.classList.add("label"),u.textContent=r+(void 0!==n?"-"+n:"");var p=document.createElement("input");return p.classList.add("input-val"),p.setAttribute("type","number"),p.setAttribute("min",o.min||"0"),o.max&&p.setAttribute("max",o.max),p.setAttribute("step",o.step||"0.1"),p.value=s,p.addEventListener("change",(function(){var e=t.opts[r+"_param"];e&&(e.cancelScheduledValues(i.currentTime),e.setValueAtTime(p.value,i.currentTime))})),c.appendChild(u),c.appendChild(p),c}function q(t,e,r,a,n){var i=a.value||t.opts[r],o=document.createElement("div");o.classList.add("container","enum",r);var s=document.createElement("div");s.classList.add("label"),s.textContent=r+(void 0!==n?"-"+n:"");var c=null;return"int"===a.values?((c=document.createElement("input")).classList.add("input-val"),c.setAttribute("type","number"),c.setAttribute("min","0"),c.setAttribute("step","0.1"),c.value=i,c.addEventListener("change",(function(){a.onchange(c.value)}))):Array.isArray(a.values)&&(c=document.createElement("select"),a.values.forEach((function(t){var e=document.createElement("option");e.value=t,e.textContent=t,c.appendChild(e)})),c.addEventListener("change",(function(){a.onchange(c.value)}))),c?(o.appendChild(s),o.appendChild(c),o):null}var b=function(t){Object.assign(this,{mod:{},opts:Object.assign({carrier_freq:220,carrier_type:"sine",modulator_freq:10,modulator_type:"sine",carrier_g:.8,modulator_g:2},t||{}),init:w.bind(this),start:E.bind(this),stop:j.bind(this)})};const O=b;function w(t){var e=t.ctx,r=t.master_g,a=e.createGain(),n=e.createOscillator(),i=e.createGain(),o=e.createOscillator(),s=e.createGain();return n.frequency.value=this.opts.carrier_freq,this.opts.carrier_freq_param=n.frequency,o.frequency.value=this.opts.modulator_freq,this.opts.modulator_freq_param=o.frequency,n.type=this.opts.carrier_type,this.opts.carrier_type_enum=g(n),o.type=this.opts.modulator_type,this.opts.modulator_type_enum=g(o),i.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=i.gain,s.gain.value=this.opts.modulator_g,this.opts.modulator_g_param=s.gain,o.connect(s).connect(i.gain),n.connect(i).connect(a).connect(r),Object.assign(this.mod,{g:a,carrier:n,c_g:i,modulator:o,m_g:s}),window.AM=this.mod,t.show_docfrag?f(this,t):this}function E(t){var e=this.mod;[e.carrier,e.modulator].forEach((function(t){return t.start()}))}function j(t){var e=this.mod;[e.carrier,e.modulator].forEach((function(t){return t.stop()}))}var x=function(t){Object.assign(this,{mod:{},opts:Object.assign({carrier_freq:220,carrier_type:"sine",modulator_freq:10,modulator_type:"sine",d_gain:40,carrier_g:.8},t||{}),init:M.bind(this),start:A.bind(this),stop:F.bind(this)})};const C=x;function M(t){var e=this,r=t.ctx,a=t.master_g,n=r.createOscillator(),i=r.createGain(),o=r.createOscillator(),s=r.createGain();return n.frequency.value=this.opts.carrier_freq,o.frequency.value=this.opts.modulator_freq,this.opts.modulator_freq_param=o.frequency,n.type=this.opts.carrier_type,this.opts.carrier_type_enum=g(n),o.type=this.opts.modulator_type,this.opts.modulator_type_enum=g(o),s.gain.value=this.opts.d_gain,this.opts.d_gain_param=s.gain,i.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=i.gain,o.connect(s).connect(n.frequency),n.connect(i).connect(a),Object.assign(this.mod,{carrier:n,c_g:i,modulator:o,d:s,change_i:function(t,e){return o.frequency.value=e||o.frequency.value,s.gain.value=o.frequency.value*t,{d_gain:s.gain.value}},change_i_exp:function(t,e,a){o.frequency.value=e||o.frequency.value;var n=o.frequency.value*t;return s.gain.cancelScheduledValues(r.currentTime),s.gain.setValueAtTime(s.gain.value,r.currentTime),s.gain.exponentialRampToValueAtTime(n,r.currentTime+a),{d_gain:s.gain.value}},change_pitch:function(t){n.frequency.value=t;var r=t*o.frequency.value/n.frequency.value,a=s.gain.value/o.frequency.value;return{mod_freq:r,ratio_tobe_kept:a,d_gain:e.mod.change_i(a,r).d_gain}},change_pitch_exp:function(t,a){n.frequency.setValueAtTime(n.frequency.value,r.currentTime),n.frequency.exponentialRampToValueAtTime(t,r.currentTime+a);var i=t*o.frequency.value/n.frequency.value,c=s.gain.value/o.frequency.value;return{mod_freq:i,ratio_tobe_kept:c,d_gain:e.mod.change_i_exp(c,i,a).d_gain}}}),window.FM=this.mod,t.show_docfrag?f(this,t,L):this}function A(t){var e=this.mod;[e.carrier,e.modulator].forEach((function(t){return t.start()}))}function F(t){var e=this.mod;[e.carrier,e.modulator].forEach((function(t){return t.stop()}))}function L(t,e){var r=new DocumentFragment;return["change_i","change_pitch"].forEach((function(e){var a=document.createElement("div");a.classList.add("container");var n=document.createElement("div");n.classList.add("label"),n.textContent=e;var i="change_i"===e?function(){var e=document.createElement("div");return e.classList.add("container","container-opts","change-i"),["ratio","time"].forEach((function(r){var a=document.createElement("div");a.classList.add("opt-container",r);var n=document.createElement("div");n.textContent=r;var i=document.createElement("input");i.classList.add("input-val"),i.value="ratio"===r?t.mod.d.gain.value/t.mod.modulator.frequency.value:0,i.setAttribute("type","number"),i.setAttribute("min","0"),i.setAttribute("step","time"===r?"1":"0.1"),i.addEventListener("change",(function(){var r=S(e),a=parseInt(r.querySelector(".change-i > .time > .input-val").value),n=parseFloat(r.querySelector(".change-i > .ratio > .input-val").value),i=r.querySelector(".d_gain > .input-val"),o=t.mod.modulator.frequency.value,s=t.mod[a?"change_i_exp":"change_i"](n,o,a).d_gain;i.value=s})),a.appendChild(n),a.appendChild(i),e.appendChild(a)})),e}():function(){var e=document.createElement("div");return e.classList.add("container","container-opts","change-pitch"),["carrier_freq","time"].forEach((function(r){var a=document.createElement("div");a.classList.add("opt-container",r);var n=document.createElement("div");n.textContent=r;var i=document.createElement("input");i.classList.add("input-val"),i.value="carrier_freq"===r?t.mod.carrier.frequency.value:0,i.setAttribute("type","number"),i.setAttribute("min","0"),i.setAttribute("step","time"===r?"1":"0.1"),i.addEventListener("change",(function(){var r=S(e),a=parseInt(r.querySelector(".change-pitch > .time > .input-val").value),n=parseFloat(r.querySelector(".change-pitch > .carrier_freq > .input-val").value),i=r.querySelector(".change-i > .ratio > .input-val"),o=r.querySelector(".modulator_freq > .input-val"),s=r.querySelector(".d_gain > .input-val"),c=t.mod[a?"change_pitch_exp":"change_pitch"](n,a),u=c.ratio_tobe_kept,p=c.mod_freq,d=c.d_gain;i.value=u,o.value=p,s.value=d})),a.appendChild(n),a.appendChild(i),e.appendChild(a)})),e}();a.appendChild(n),a.appendChild(i),r.appendChild(a)})),r}function S(t){return t.classList.contains("controls")||t.classList.contains("main-container")?t:S(t.parentElement)}function G(t){return t}var T=null,k=function(t){Object.assign(this,{mod:{},opts:Object.assign({osc_freq:220,osc_type:"sine",chp_freq:5.7},t||{}),init:N.bind(this),start:P.bind(this),stop:R.bind(this)})};const I=k;function N(e){var r=this,a=e.ctx,n=e.master_g,i=new G(new URL(t.p+t.u(62),t.b));a.audioWorklet.addModule(i).then((function(){var t=new AudioWorkletNode(a,"ch-phaser-processor",{numberOfOutputs:1,outputChannelCount:[2]}),i=t.parameters.get("frequency");if(i.value=r.opts.chp_freq,r.opts.chp_freq_param=i,o.connect(t).connect(n),Object.assign(r.mod,{chpNode:t}),e.show_docfrag&&e.container){var s=l(T,{opts:{chp_freq:r.opts.chp_freq,chp_freq_param:r.opts.chp_freq_param}},e);e.container.appendChild(s)}}));var o=a.createOscillator();o.frequency.value=this.opts.osc_freq,this.opts.osc_freq_param=o.frequency,o.type=this.opts.osc_type,this.opts.osc_type_enum=g(o),window.CHPhaser=this.mod,Object.assign(this.mod,{osc:o});var s=this;return e.show_docfrag&&(s=T=f(this,e)),s}function P(t){this.mod.osc.start()}function R(t){this.mod.osc.stop()}var W=null,V=function(t){Object.assign(this,{mod:{},opts:Object.assign({osc1_freq:220,osc1_type:"sine",osc2_freq:110,osc2_type:"sine",cf_amount:.5},t||{}),init:U.bind(this),start:$.bind(this),stop:z.bind(this)})};const D=V;function U(e){var r=this,a=e.ctx,n=e.master_g,i=a.createOscillator();i.frequency.value=this.opts.osc1_freq,this.opts.osc1_freq_param=i.frequency,i.type=this.opts.osc1_type,this.opts.osc1_type_enum=g(i);var o=a.createOscillator();o.frequency.value=this.opts.osc2_freq,this.opts.osc2_freq_param=o.frequency,o.type=this.opts.osc2_type,this.opts.osc2_type_enum=g(o);var s=new G(new URL(t.p+t.u(375),t.b));a.audioWorklet.addModule(s).then((function(){var t=new AudioWorkletNode(a,"linear-crossfading-processor",{numberOfInputs:2,numberOfOutputs:2}),s=t.parameters.get("amount");if(s.value=r.opts.cf_amount,r.opts.cf_amount_param=s,i.connect(t),o.connect(t,0,1),t.connect(n),Object.assign(r.mod,{cfpNode:t}),e.show_docfrag&&e.container){var c=l(W,{opts:{cf_amount:r.opts.cf_amount,cf_amount_param:r.opts.cf_amount_param}},e);e.container.appendChild(c)}})),window.LinearCrossfading=this.mod,Object.assign(this.mod,{osc_1:i,osc_2:o});var c=this;return e.show_docfrag&&(c=W=f(this,e)),c}function $(t){var e=this.mod;[e.osc_1,e.osc_2].forEach((function(t){return t.start()}))}function z(t){var e=this.mod;[e.osc_1,e.osc_2].forEach((function(t){return t.stop()}))}var H=null,Y=function(t){Object.assign(this,{mod:{},opts:Object.assign({osc1_freq:2,osc1_type:"sawtooth",osc2_freq:3.5,osc2_type:"square",cf_amount:{value:.2,max:1},cf_mix_length:{value:.01,step:.01}},t||{}),init:J.bind(this),start:K.bind(this),stop:Q.bind(this)})};const B=Y;function J(e){var r=this,a=e.ctx,n=e.master_g,i=a.createOscillator();i.frequency.value=this.opts.osc1_freq,this.opts.osc1_freq_param=i.frequency,i.type=this.opts.osc1_type,this.opts.osc1_type_enum=g(i);var o=a.createOscillator();o.frequency.value=this.opts.osc2_freq,this.opts.osc2_freq_param=o.frequency,o.type=this.opts.osc2_type,this.opts.osc2_type_enum=g(o);var s=new G(new URL(t.p+t.u(693),t.b));a.audioWorklet.addModule(s).then((function(){var t=new AudioWorkletNode(a,"mix-crossfading-processor",{numberOfInputs:2,numberOfOutputs:2}),s=t.parameters.get("amount");s.value=r.opts.cf_amount.value,r.opts.cf_amount_param=s;var c=t.parameters.get("mix_length");if(c.value=r.opts.cf_mix_length.value,r.opts.cf_mix_length_param=c,i.connect(t),o.connect(t,0,1),t.connect(n),Object.assign(r.mod,{cfpNode:t}),e.show_docfrag&&e.container){var u=l(H,{opts:{cf_amount:r.opts.cf_amount,cf_amount_param:r.opts.cf_amount_param,cf_mix_length:r.opts.cf_mix_length,cf_mix_length_param:r.opts.cf_mix_length_param}},e);e.container.appendChild(u)}})),window.MixCrossfading=this.mod,Object.assign(this.mod,{osc_1:i,osc_2:o});var c=this;return e.show_docfrag&&(c=H=f(this,e)),c}function K(t){var e=this.mod;[e.osc_1,e.osc_2].forEach((function(t){return t.start()}))}function Q(t){var e=this.mod;[e.osc_1,e.osc_2].forEach((function(t){return t.stop()}))}var X=function(t){return Object.assign(this,{mod:{},opts:Object.assign({carrier_freq:220,carrier_type:"sine",modulator_freq:10,modulator_type:"sine",carrier_g:.8,modulator_g:2},t||{}),init:tt.bind(this),start:et.bind(this),stop:rt.bind(this)})};const Z=X;function tt(t){var e=t.ctx,r=t.master_g,a=e.createOscillator(),n=e.createGain(),i=e.createOscillator(),o=e.createGain();return a.frequency.value=this.opts.carrier_freq,this.opts.carrier_freq_param=a.frequency,i.frequency.value=this.opts.modulator_freq,this.opts.modulator_freq_param=i.frequency,a.type=this.opts.carrier_type,this.opts.carrier_type_enum=g(a),i.type=this.opts.modulator_type,this.opts.modulator_type_enum=g(i),n.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=n.gain,o.gain.value=this.opts.modulator_g,this.opts.modulator_g_param=o.gain,i.connect(o).connect(n),a.connect(n).connect(r),Object.assign(this.mod,{carrier:a,c_g:n,modulator:i,m_g:o}),window.RM=this.mod,t.show_docfrag?f(this,t):this}function et(t){var e=this.mod;[e.carrier,e.modulator].forEach((function(t){return t.start()}))}function rt(t){var e=this.mod;[e.carrier,e.modulator].forEach((function(t){return t.stop()}))}var at=function(t){Object.assign(this,{mod:{},opts:Object.assign({carrier_freq:220,carrier_type:"sine",carrier_g:1,shaping_amount:4,shaping_harmonics:[.1,.1,.1,.1,.1],shaping_fn:"distortion"},t||{}),init:it.bind(this),start:dt.bind(this),stop:mt.bind(this)})};const nt=at;function it(t){var e=this,r=t.ctx,a=t.master_g,n=r.createWaveShaper(),i=r.createOscillator(),o=r.createGain();i.frequency.value=this.opts.carrier_freq,this.opts.carrier_freq_param=i.frequency,i.type=this.opts.carrier_type,this.opts.carrier_type_enum=g(i),o.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=o.gain;var s=this.opts.shaping_harmonics.length,c=this.opts.shaping_harmonics,u=this.opts.shaping_amount,p={distortion:{fn:st,set_args:function(t,r){return t.bind(null,parseFloat(r||e.opts.shaping_amount))}},chebishev:{fn:ct,set_args:function(t,e){return Object.assign(t.bind(null,s,c.map((function(t){return t*parseFloat(e||1)}))),Object.assign({},ut))}}},d=p[this.opts.shaping_fn];return n.curve=ot(r,d.set_args(d.fn)),this.opts.shaping_harmonics_enum=c.map((function(t,e){return{values:"int",value:t,onchange:function(t){c[e]=parseFloat(t),n.curve=ot(r,d.set_args(d.fn,u))}}})),this.opts.shaping_amount_enum={values:"int",onchange:function(t){u=parseFloat(t),n.curve=ot(r,d.set_args(d.fn,u))}},this.opts.shaping_fn_enum={values:["distortion","chebishev"],onchange:function(t){d=p[t],n.curve=ot(r,d.set_args(d.fn,u))}},i.connect(o).connect(n).connect(a),Object.assign(this.mod,{carrier:i,c_g:o,ws:n}),window.WS=this.mod,t.show_docfrag?f(this,t):this}function ot(t,e){var r=t.sampleRate,a=new Float32Array(r);e.init_processing&&e.init_processing(e);for(var n=0;n<r;n++){var i=2*n/r-1;a[n]=e(i),e.step_processing&&e.step_processing(e,a[n])}return e.post_processing?e.post_processing(e,a):a}function st(t,e){var r="number"==typeof t?t:50;return(3+r)*e*20*(Math.PI/180)/(Math.PI+r*Math.abs(e))}function ct(t,e,r){var a=function(r){for(var a=pt(1,r),n=2;n<t+2;n++)a+=e[n-2]*pt(n,r);return a};return a(r)-a(0)}var ut={f1_max:Number.NEGATIVE_INFINITY,init_processing:function(t){return t.f1_max=Number.NEGATIVE_INFINITY},step_processing:function(t,e){return t.f1_max=Math.max(t.f1_max,e)},post_processing:function(t,e){for(var r=0;r<e.length;r++)e[r]/=t.f1_max;return e}};function pt(t,e){return 0===t?1:1===t?e:2*e*pt(t-1,e)+pt(t-2,e)}function dt(t){this.mod.carrier.start()}function mt(t){this.mod.carrier.stop()}var _t=function(t){Object.assign(this,{mod:{},opts:Object.assign({modulator1_freq:7,modulator1_type:"sine",d1_gain:40,modulator2_freq:22,modulator2_type:"sine",d2_gain:20,mods_g:1,carrier_freq:100,carrier_type:"sine",carrier_g:1},t||{}),init:ft.bind(this),start:lt.bind(this),stop:gt.bind(this)})};const ht=_t;function ft(t){var e=t.ctx,r=t.master_g,a=e.createOscillator(),n=e.createGain(),i=e.createOscillator(),o=e.createGain(),s=e.createGain(),c=e.createOscillator(),u=e.createGain();return a.frequency.value=this.opts.modulator1_freq,this.opts.modulator1_freq_param=a.frequency,n.gain.value=this.opts.d1_gain,this.opts.d1_gain_param=n.gain,i.frequency.value=this.opts.modulator2_freq,this.opts.modulator2_freq_param=i.frequency,o.gain.value=this.opts.d2_gain,this.opts.d2_gain_param=o.gain,s.gain.value=this.opts.mods_g,this.opts.mods_g_param=s.gain,c.frequency.value=this.opts.carrier_freq,this.opts.carrier_freq_param=c.frequency,u.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=u.gain,c.type=this.opts.carrier_type,this.opts.carrier_type_enum=g(c),a.type=this.opts.modulator1_type,this.opts.modulator1_type_enum=g(a),i.type=this.opts.modulator2_type,this.opts.modulator2_type_enum=g(i),a.connect(n),i.connect(o),n.connect(s),o.connect(s.gain),s.connect(c.frequency),c.connect(u),u.connect(r),Object.assign(this.mod,{m1:a,d1:n,m2:i,d2:o,mods_g:s,c,g:u}),window.FM1c2m=this.mod,t.show_docfrag?f(this,t):this}function lt(t){var e=this.mod;[e.m1,e.m2,e.c].forEach((function(t){return t.start()}))}function gt(t){var e=this.mod;[e.m1,e.m2,e.c].forEach((function(t){return t.stop()}))}var vt=function(t){Object.assign(this,{mod:{},opts:Object.assign({modulator1_freq:7,modulator1_type:"sine",d1_gain:40,modulator2_freq:22,modulator2_type:"sine",d2_gain:20,mods_g:1,carrier_freq:100,carrier_type:"sine",carrier_g:1},t||{}),init:qt.bind(this),start:bt.bind(this),stop:Ot.bind(this)})};const yt=vt;function qt(t){var e=t.ctx,r=t.master_g,a=e.createOscillator(),n=e.createGain(),i=e.createOscillator(),o=e.createGain(),s=e.createGain(),c=e.createOscillator(),u=e.createGain();return a.frequency.value=this.opts.modulator1_freq,this.opts.modulator1_freq_param=a.frequency,n.gain.value=this.opts.d1_gain,this.opts.d1_gain_param=n.gain,i.frequency.value=this.opts.modulator2_freq,this.opts.modulator2_freq_param=i.frequency,o.gain.value=this.opts.d2_gain,this.opts.d2_gain_param=o.gain,s.gain.value=this.opts.mods_g,this.opts.mods_g_param=s.gain,c.frequency.value=this.opts.carrier_freq,this.opts.carrier_freq_param=c.frequency,c.type=this.opts.carrier_type,this.opts.carrier_type_enum=g(c),a.type=this.opts.modulator1_type,this.opts.modulator1_type_enum=g(a),i.type=this.opts.modulator2_type,this.opts.modulator2_type_enum=g(i),u.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=u.gain,a.connect(n),i.connect(o),n.connect(i.frequency),o.connect(s),s.connect(c.frequency),c.connect(u),u.connect(r),Object.assign(this.mod,{m1:a,d1:n,m2:i,d2:o,mods_g:s,c,g:u}),window.FM1c2sm=this.mod,t.show_docfrag?f(this,t):this}function bt(t){var e=this.mod;[e.m1,e.m2,e.c].forEach((function(t){return t.start()}))}function Ot(t){var e=this.mod;[e.m1,e.m2,e.c].forEach((function(t){return t.stop()}))}var wt=function(t){Object.assign(this,{mod:{},opts:Object.assign({modulator_freq:7,modulator_type:"sine",d_gain:40,carrier1_freq:200,carrier1_type:"sine",carrier2_freq:40,carrier2_type:"sine",carrier_g:.1},t||{}),init:jt.bind(this),start:xt.bind(this),stop:Ct.bind(this)})};const Et=wt;function jt(t){var e=t.ctx,r=t.master_g,a=e.createOscillator(),n=e.createGain(),i=e.createOscillator(),o=e.createOscillator(),s=e.createGain();return a.frequency.value=this.opts.modulator_freq,this.opts.modulator_freq_param=a.frequency,n.gain.value=this.opts.d_gain,this.opts.d_gain_param=n.gain,i.frequency.value=this.opts.carrier1_freq,this.opts.carrier1_freq_param=i.frequency,o.frequency.value=this.opts.carrier2_freq,this.opts.carrier2_freq_param=o.frequency,s.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=s.gain,a.type=this.opts.modulator_type,this.opts.modulator_type_enum=g(a),i.type=this.opts.carrier1_type,this.opts.carrier1_type_enum=g(i),o.type=this.opts.carrier2_type,this.opts.carrier2_type_enum=g(o),a.connect(n),n.connect(i.frequency),n.connect(o.frequency),i.connect(s),o.connect(s.gain),s.connect(r),Object.assign(this.mod,{m:a,d:n,c1:i,c2:o,g:s}),window.FM2c1m=this.mod,t.show_docfrag?f(this,t):this}function xt(t){var e=this.mod;[e.m,e.c1,e.c2].forEach((function(t){return t.start()}))}function Ct(t){var e=this.mod;[e.m,e.c1,e.c2].forEach((function(t){return t.stop()}))}var Mt=function(t){Object.assign(this,{mod:{},opts:Object.assign({m1_carrier_freq:80,m1_modulatr_freq:20,m1_d_gain:10,m1_carrier_g:.8,m2_carrier_freq:120,m2_modulator_freq:22,m2_d_gain:10,m2_carrier_g:.8,inst_g:1},t||{}),init:Ft.bind(this),start:Lt.bind(this),stop:St.bind(this)})};const At=Mt;function Ft(t){var e=t.ctx,r=t.master_g,a=e.createGain(),n=new x({carrier_freq:this.opts.m1_carrier_freq,modulator_freq:this.opts.m1_modulatr_freq,d_gain:this.opts.m1_d_gain,master_g:a,show_docfrag:t.show_docfrag}),i=new x({carrier_freq:this.opts.m2_carrier_freq,modulator_freq:this.opts.m2_modulator_freq,d_gain:this.opts.m2_d_gain,master_g:a.gain,show_docfrag:t.show_docfrag});a.gain.value=this.opts.inst_g;var o=n.init(t),s=i.init(t);return a.connect(r),Object.assign(this.mod,{m1:n,m2:i}),window.FMAcim=this.mod,t.show_docfrag?function(t,e,r,a){var n=new DocumentFragment;return[r,a].forEach((function(t,e){var r=document.createElement("div"),a=e+1;r.classList.add("main-container","opt-container","fm-acim","mod-"+a);var i=document.createElement("div");i.classList.add("label"),i.textContent="FM MOD "+a,r.appendChild(i),r.appendChild(t),n.appendChild(r)})),n}(0,0,o,s):this}function Lt(t){var e=this;Object.keys(this.mod).forEach((function(t){var r=e.mod[t].mod;[r.carrier,r.modulator].forEach((function(t){return t.start()}))}))}function St(t){var e=this;Object.keys(this.mod).forEach((function(t){var r=e.mod[t].mod;[r.carrier,r.modulator].forEach((function(t){return t.stop()}))}))}var Gt=function(t){Object.assign(this,{mod:{},opts:Object.assign({mod_g:1,carrier_freq:100,carrier_type:"sine",carrier_g:1},t||{}),init:kt.bind(this),start:It.bind(this),stop:Nt.bind(this)})};const Tt=Gt;function kt(t){var e=t.ctx,r=t.master_g,a=e.createGain(),n=e.createOscillator(),i=e.createGain();return a.gain.value=this.opts.mod_g,this.opts.mod_g_param=a.gain,n.frequency.value=this.opts.carrier_freq,this.opts.carrier_freq_param=n.frequency,n.type=this.opts.carrier_type,this.opts.carrier_type_enum=g(n),i.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=i.gain,n.connect(i),i.connect(a),a.connect(n.frequency),i.connect(r),Object.assign(this.mod,{c:n,g:i,mod_g:a}),window.FM_selfc=this.mod,t.show_docfrag?f(this,t):this}function It(t){this.mod.c.start()}function Nt(t){this.mod.c.stop()}var Pt={};Pt.WS=c,Pt.RM=s,Pt.MixLinearCrossfading=o,Pt.LinearCrossfading=i,Pt.FuzzyPhaser=n,Pt.FM=a,Pt.AM=r;var Rt=Pt,Wt={};Wt.FMselfc=_,Wt.FMAcim=m,Wt.FM2c1m=d,Wt.FM1c2sm=p,Wt.FM1c2m=u;var Vt=Wt,Dt={},Ut={};Object.keys(Rt).forEach((function(t){Dt[t]=opts[t].default})),Object.keys(Vt).forEach((function(t){Ut[t]=Vt[t].default}));const $t={operators:Dt,instruments:Ut};return e})()));