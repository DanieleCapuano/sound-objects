/*! For license information please see sound_objects_test.js.LICENSE.txt */
(()=>{"use strict";var t={335:(t,e,r)=>{t.exports=r.p+"0de33a6d93afc7422a46.js"},747:(t,e,r)=>{t.exports=r.p+"8356c00f1771c796e142.js"},518:(t,e,r)=>{t.exports=r.p+"61512167adf06f93a6e5.js"},419:(t,e,r)=>{t.exports=r.p+"b3d1f64c8a19cb8e9197.js"}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,r),a.exports}r.m=t,r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&!t;)t=n[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),r.b=document.baseURI||self.location.href,(()=>{var t={};r.r(t),r.d(t,{AM:()=>O,default:()=>x});var e={};r.r(e),r.d(e,{MixCrossfading:()=>F,default:()=>G});var n={};r.r(n),r.d(n,{CHRouter2In6Out:()=>P,default:()=>R});var o={};r.r(o),r.d(o,{FM:()=>U,default:()=>H});var a={};r.r(a),r.d(a,{CHPhaser:()=>Q,default:()=>X});var i={};r.r(i),r.d(i,{LinearCrossfading:()=>nt,default:()=>ot});var c={};r.r(c),r.d(c,{MixCrossfading:()=>ut,default:()=>pt});var s={};r.r(s),r.d(s,{RM:()=>ht,default:()=>mt});var u={};r.r(u),r.d(u,{WS:()=>yt,default:()=>bt});var p={};r.r(p),r.d(p,{FM1c2m:()=>St,default:()=>Mt});var l={};r.r(l),r.d(l,{FM1c2sm:()=>Gt,default:()=>kt});var f={};r.r(f),r.d(f,{FM2c1m:()=>Rt,default:()=>Wt});var d={};r.r(d),r.d(d,{FMAcim:()=>Ht,default:()=>Bt});var h={};function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}r.r(h),r.d(h,{FMselfc:()=>Jt,default:()=>Kt});var _=function(t,e,r){var n=new DocumentFragment;return Object.keys(t.opts).forEach((function(r){var o=b(t,e,r,"param"),a=b(t,e,r,"enum");o&&n.appendChild(o),a&&n.appendChild(a)})),r&&n.appendChild(r(t,e)),n},g=function(t,e,r,n){var o=t||new DocumentFragment;return Object.keys(e.opts).forEach((function(t){var n=b(e,r,t,"param"),a=b(e,r,t,"enum");n&&o.appendChild(n),a&&o.appendChild(a)})),n&&o.appendChild(n(e,r)),o},v=function(t){return{values:["sine","triangle","square","sawtooth"],onchange:function(e){return t.type=e}}},y=function(t,e){t&&Array.prototype.slice.call(t.childNodes).forEach((function(e){return t.removeChild(e)})),e&&(e.port.postMessage({type:"set_running",value:!1}),e.disconnect())};function b(t,e,r,n){var o={param:q,enum:w},a=t.opts[r+"_"+n];if(!a)return null;var i=document.createElement("div");return i.classList.add("container"),(a=Array.isArray(a)?a:[a]).forEach((function(c,s){var u=o[n](t,e,r,c,1===a.length?void 0:s);i.appendChild(u)})),i}function q(t,e,r,n,o){var a=e.ctx,i=t.opts[r],c=n.value||i;"object"===m(c)&&(c=c.value);var s=document.createElement("div");s.classList.add("container","param",r);var u=document.createElement("div");u.classList.add("label"),u.textContent=r+(void 0!==o?"-"+o:"");var p=document.createElement("input");return p.classList.add("input-val"),p.setAttribute("type","number"),p.setAttribute("min",i.min||"0"),i.max&&p.setAttribute("max",i.max),p.setAttribute("step",i.step||"0.1"),p.value=c,p.addEventListener("change",(function(){var e=t.opts[r+"_param"];e&&(e.cancelScheduledValues(a.currentTime),e.setValueAtTime(p.value,a.currentTime))})),s.appendChild(u),s.appendChild(p),s}function w(t,e,r,n,o){var a=n.value||t.opts[r],i=document.createElement("div");i.classList.add("container","enum",r);var c=document.createElement("div");c.classList.add("label"),c.textContent=r+(void 0!==o?"-"+o:"");var s=null;return"int"===n.values?((s=document.createElement("input")).classList.add("input-val"),s.setAttribute("type","number"),s.setAttribute("min","0"),s.setAttribute("step","0.1"),s.value=a,s.addEventListener("change",(function(){n.onchange(s.value)}))):Array.isArray(n.values)&&(s=document.createElement("select"),n.values.forEach((function(t){var e=document.createElement("option");e.value=t,e.textContent=t,s.appendChild(e)})),s.addEventListener("change",(function(){n.onchange(s.value)}))),s?(i.appendChild(c),i.appendChild(s),i):null}var O=function(t){Object.assign(this,{mod:{},opts:Object.assign({carrier_freq:220,carrier_type:"sine",modulator_freq:10,modulator_type:"sine",carrier_g:.8,modulator_g:2},t||{}),init:E.bind(this),start:j.bind(this),stop:C.bind(this)})};const x=O;function E(t){var e=t.ctx,r=t.master_g,n=e.createGain(),o=e.createOscillator(),a=e.createGain(),i=e.createOscillator(),c=e.createGain();o.frequency.value=this.opts.carrier_freq,this.opts.carrier_freq_param=o.frequency,i.frequency.value=this.opts.modulator_freq,this.opts.modulator_freq_param=i.frequency,o.type=this.opts.carrier_type,this.opts.carrier_type_enum=v(o),i.type=this.opts.modulator_type,this.opts.modulator_type_enum=v(i),a.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=a.gain,c.gain.value=this.opts.modulator_g,this.opts.modulator_g_param=c.gain,i.connect(c).connect(a.gain),o.connect(a).connect(n).connect(r),Object.assign(this.mod,{g:n,carrier:o,c_g:a,modulator:i,m_g:c});var s=this;return t.show_docfrag&&(window.AM=this.mod,s=_(this,t)),s}function j(t){var e=this.mod;[e.carrier,e.modulator].forEach((function(t){return t.start()}))}function C(t){var e=this.mod;[e.carrier,e.modulator].forEach((function(t){return t.stop()}))}function L(t){return t}function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function M(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==S(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===S(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var A=null,T=null,F=function(t){Object.assign(this,{mod:{},opts:Object.assign({a1_g:.5,a2_g:.5,cf_amount:{value:.5,max:1},cf_mix_length:{value:.06,step:.01}},t||{}),init:k.bind(this),start:N.bind(this),stop:I.bind(this)})};const G=F;function k(t){var e=this,n=t.ctx,o=t.master_g,a=new L(new URL(r(419),r.b));T=new Promise((function(r){Promise.all([fetch("/audio/drop.wav"),fetch("/audio/voice.wav"),n.audioWorklet.addModule(a)]).then((function(a){var i=new AudioWorkletNode(n,"mix-crossfading-processor",{numberOfInputs:2,numberOfOutputs:2}),c=!0;e.opts.cf_amount_param&&(c=!1);var s=i.parameters.get("amount");s.value=e.opts.cf_amount.value,e.opts.cf_amount_param=s;var u=i.parameters.get("mix_length");if(u.value=e.opts.cf_mix_length.value,e.opts.cf_mix_length_param=u,Object.assign(e.mod,{cfpNode:i}),t.show_docfrag&&t.container&&c){var p=g(A,{opts:{cf_amount:e.opts.cf_amount,cf_amount_param:e.opts.cf_amount_param,cf_mix_length:e.opts.cf_mix_length,cf_mix_length_param:e.opts.cf_mix_length_param}},t);t.container.appendChild(p)}Promise.all([a[0],a[1]].map((function(t){return t.arrayBuffer()}))).then((function(t){var a=[e.opts.a1_g,e.opts.a2_g],c=t.length;t.forEach((function(t,s){n.decodeAudioData(t,(function(t){var u,p=n.createBufferSource(),l=n.createGain(),f=n.createBiquadFilter();p.buffer=t,p.loop=!0,1===s&&(p.detune.value=100,p.playbackRate.value=.4),l.gain.value=a[s],f.type="highpass",f.value=400,p.connect(f).connect(l).connect(i,0,s),i.connect(o),Object.assign(e.mod,(M(u={},"bs_"+s,p),M(u,"bs_g_"+s,l),u)),--c<=0&&r()}))}))}))}))}));var i=this;return t.show_docfrag&&(window.MixCrossfading=this.mod,i=A=_(this,t)),i}function N(t){var e=this;T.then((function(){var t=e.mod;[t.bs_0,t.bs_1].forEach((function(t){return t.start()}))}))}function I(t){var e=this;T.then((function(){var r=e.mod,n=r.bs_0,o=r.bs_1,a=r.cfpNode;[n,o].forEach((function(t){return t.stop()})),y(t.container,a),A=null,T=null}))}var P=function(t){Object.assign(this,{mod:{},opts:Object.assign({osc_l_freq:110,osc_l_type:"sine",osc_l_gain_l:.8,osc_l_gain_r:.2,osc_r_freq:70,osc_r_type:"sine",osc_r_gain_l:.2,osc_r_gain_r:.8},t||{}),init:W.bind(this),start:V.bind(this),stop:D.bind(this)})};const R=P;function W(t){var e=this,n=t.ctx,o=t.master_g,a=new L(new URL(r(335),r.b));n.audioWorklet.addModule(a).then((function(){var t=new AudioWorkletNode(n,"channel-router-processor",{numberOfInputs:2,numberOfOutputs:1,outputChannelCount:[6]});t.port.postMessage({type:"set_channels_mapping",value:{0:0,1:1,2:0,3:1,4:0,5:1}}),t.channelCountMode="explicit",t.channelInterpretation="discrete",n.destination.channelCount=6,n.destination.channelCountMode="explicit",n.destination.channelInterpretation="discrete",o.channelCount=6,o.channelCountMode="explicit",o.channelInterpretation="discrete",s.connect(u).connect(i),s.connect(p).connect(c),l.connect(f).connect(i),l.connect(d).connect(c),i.connect(t,0,0).connect(o),c.connect(t,0,1).connect(o),Object.assign(e.mod,{chrNode:t})}));var i=n.createGain(),c=n.createGain(),s=n.createOscillator(),u=n.createGain(),p=n.createGain();s.frequency.value=this.opts.osc_l_freq,this.opts.osc_l_freq_param=s.frequency,s.type=this.opts.osc_l_type,this.opts.osc_l_type_enum=v(s),u.gain.value=this.opts.osc_l_gain_l,this.opts.osc_l_gain_l_param=u.gain,p.gain.value=this.opts.osc_l_gain_r,this.opts.osc_l_gain_r_param=p.gain;var l=n.createOscillator(),f=n.createGain(),d=n.createGain();l.frequency.value=this.opts.osc_r_freq,this.opts.osc_r_freq_param=l.frequency,l.type=this.opts.osc_r_type,this.opts.osc_r_type_enum=v(l),f.gain.value=this.opts.osc_r_gain_l,this.opts.osc_r_gain_l_param=f.gain,d.gain.value=this.opts.osc_r_gain_r,this.opts.osc_r_gain_r_param=d.gain,Object.assign(this.mod,{osc_l:s,osc_l_gl:u,osc_l_gr:p,osc_r:l,osc_r_gl:f,osc_r_gr:d});var h=this;return t.show_docfrag&&(window.CHRouter2In6Out=this.mod,h=_(this,t)),h}function V(t){var e=this.mod;[e.osc_l,e.osc_r].forEach((function(t){return t.start()}))}function D(t){var e=t.ctx,r=t.master_g,n=t.container;e.destination.channelCount=2,e.destination.channelCountMode="max",e.destination.channelInterpretation="speakers",r.channelCount=2,r.channelCountMode="max",r.channelInterpretation="speakers";var o=this.mod,a=o.osc_l,i=o.osc_r,c=o.chrNode;[a,i].forEach((function(t){return t.stop()})),y(n,c)}var U=function(t){Object.assign(this,{mod:{},opts:Object.assign({carrier_freq:220,carrier_type:"sine",modulator_freq:10,modulator_type:"sine",d_gain:40,carrier_g:.8},t||{}),init:B.bind(this),start:Y.bind(this),stop:$.bind(this)})};const H=U;function B(t){var e=this,r=t.ctx,n=t.master_g,o=r.createOscillator(),a=r.createGain(),i=r.createOscillator(),c=r.createGain();o.frequency.value=this.opts.carrier_freq,i.frequency.value=this.opts.modulator_freq,this.opts.modulator_freq_param=i.frequency,o.type=this.opts.carrier_type,this.opts.carrier_type_enum=v(o),i.type=this.opts.modulator_type,this.opts.modulator_type_enum=v(i),c.gain.value=this.opts.d_gain,this.opts.d_gain_param=c.gain,a.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=a.gain,i.connect(c).connect(o.frequency),o.connect(a).connect(n),Object.assign(this.mod,{carrier:o,c_g:a,modulator:i,d:c,change_i:function(t,e){return i.frequency.value=e||i.frequency.value,c.gain.value=i.frequency.value*t,{d_gain:c.gain.value}},change_i_exp:function(t,e,n){i.frequency.value=e||i.frequency.value;var o=i.frequency.value*t;return c.gain.cancelScheduledValues(r.currentTime),c.gain.setValueAtTime(c.gain.value,r.currentTime),c.gain.exponentialRampToValueAtTime(o,r.currentTime+n),{d_gain:c.gain.value}},change_pitch:function(t){o.frequency.value=t;var r=t*i.frequency.value/o.frequency.value,n=c.gain.value/i.frequency.value;return{mod_freq:r,ratio_tobe_kept:n,d_gain:e.mod.change_i(n,r).d_gain}},change_pitch_exp:function(t,n){o.frequency.setValueAtTime(o.frequency.value,r.currentTime),o.frequency.exponentialRampToValueAtTime(t,r.currentTime+n);var a=t*i.frequency.value/o.frequency.value,s=c.gain.value/i.frequency.value;return{mod_freq:a,ratio_tobe_kept:s,d_gain:e.mod.change_i_exp(s,a,n).d_gain}}});var s=this;return t.show_docfrag&&(window.FM=this.mod,s=_(this,t,z)),s}function Y(t){var e=this.mod;[e.carrier,e.modulator].forEach((function(t){return t.start()}))}function $(t){var e=this.mod;[e.carrier,e.modulator].forEach((function(t){return t.stop()}))}function z(t,e){var r=new DocumentFragment;return["change_i","change_pitch"].forEach((function(e){var n=document.createElement("div");n.classList.add("container");var o=document.createElement("div");o.classList.add("label"),o.textContent=e;var a="change_i"===e?function(){var e=document.createElement("div");return e.classList.add("container","container-opts","change-i"),["ratio","time"].forEach((function(r){var n=document.createElement("div");n.classList.add("opt-container",r);var o=document.createElement("div");o.textContent=r;var a=document.createElement("input");a.classList.add("input-val"),a.value="ratio"===r?t.mod.d.gain.value/t.mod.modulator.frequency.value:0,a.setAttribute("type","number"),a.setAttribute("min","0"),a.setAttribute("step","time"===r?"1":"0.1"),a.addEventListener("change",(function(){var r=J(e),n=parseInt(r.querySelector(".change-i > .time > .input-val").value),o=parseFloat(r.querySelector(".change-i > .ratio > .input-val").value),a=r.querySelector(".d_gain > .input-val"),i=t.mod.modulator.frequency.value,c=t.mod[n?"change_i_exp":"change_i"](o,i,n).d_gain;a.value=c})),n.appendChild(o),n.appendChild(a),e.appendChild(n)})),e}():function(){var e=document.createElement("div");return e.classList.add("container","container-opts","change-pitch"),["carrier_freq","time"].forEach((function(r){var n=document.createElement("div");n.classList.add("opt-container",r);var o=document.createElement("div");o.textContent=r;var a=document.createElement("input");a.classList.add("input-val"),a.value="carrier_freq"===r?t.mod.carrier.frequency.value:0,a.setAttribute("type","number"),a.setAttribute("min","0"),a.setAttribute("step","time"===r?"1":"0.1"),a.addEventListener("change",(function(){var r=J(e),n=parseInt(r.querySelector(".change-pitch > .time > .input-val").value),o=parseFloat(r.querySelector(".change-pitch > .carrier_freq > .input-val").value),a=r.querySelector(".change-i > .ratio > .input-val"),i=r.querySelector(".modulator_freq > .input-val"),c=r.querySelector(".d_gain > .input-val"),s=t.mod[n?"change_pitch_exp":"change_pitch"](o,n),u=s.ratio_tobe_kept,p=s.mod_freq,l=s.d_gain;a.value=u,i.value=p,c.value=l})),n.appendChild(o),n.appendChild(a),e.appendChild(n)})),e}();n.appendChild(o),n.appendChild(a),r.appendChild(n)})),r}function J(t){return t.classList.contains("controls")||t.classList.contains("main-container")?t:J(t.parentElement)}var K=null,Q=function(t){Object.assign(this,{mod:{},opts:Object.assign({osc_freq:220,osc_type:"sine",chp_freq:5.7},t||{}),init:Z.bind(this),start:tt.bind(this),stop:et.bind(this)})};const X=Q;function Z(t){var e=this,n=t.ctx,o=t.master_g,a=new L(new URL(r(747),r.b));n.audioWorklet.addModule(a).then((function(){var r=new AudioWorkletNode(n,"ch-phaser-processor",{numberOfOutputs:1,outputChannelCount:[2]}),a=!0;e.opts.chp_freq_param&&(a=!1);var c=r.parameters.get("frequency");if(c.value=e.opts.chp_freq,e.opts.chp_freq_param=c,i.connect(r).connect(o),Object.assign(e.mod,{chpNode:r}),t.show_docfrag&&t.container&&a){var s=g(K,{opts:{chp_freq:e.opts.chp_freq,chp_freq_param:e.opts.chp_freq_param}},t);t.container.appendChild(s)}}));var i=n.createOscillator();i.frequency.value=this.opts.osc_freq,this.opts.osc_freq_param=i.frequency,i.type=this.opts.osc_type,this.opts.osc_type_enum=v(i),Object.assign(this.mod,{osc:i});var c=this;return t.show_docfrag&&(window.CHPhaser=this.mod,c=K=_(this,t)),c}function tt(t){this.mod.osc.start()}function et(t){var e=this.mod,r=e.osc,n=e.chpNode;r.stop(),y(t.container,n),K=null}var rt=null,nt=function(t){Object.assign(this,{mod:{},opts:Object.assign({osc1_freq:220,osc1_type:"sine",osc2_freq:110,osc2_type:"sine",cf_amount:.5},t||{}),init:at.bind(this),start:it.bind(this),stop:ct.bind(this)})};const ot=nt;function at(t){var e=this,n=t.ctx,o=t.master_g,a=n.createOscillator();a.frequency.value=this.opts.osc1_freq,this.opts.osc1_freq_param=a.frequency,a.type=this.opts.osc1_type,this.opts.osc1_type_enum=v(a);var i=n.createOscillator();i.frequency.value=this.opts.osc2_freq,this.opts.osc2_freq_param=i.frequency,i.type=this.opts.osc2_type,this.opts.osc2_type_enum=v(i);var c=new L(new URL(r(518),r.b));n.audioWorklet.addModule(c).then((function(){var r=new AudioWorkletNode(n,"linear-crossfading-processor",{numberOfInputs:2,numberOfOutputs:2}),c=!0;e.opts.cf_amount_param&&(c=!1);var s=r.parameters.get("amount");if(s.value=e.opts.cf_amount,e.opts.cf_amount_param=s,a.connect(r),i.connect(r,0,1),r.connect(o),Object.assign(e.mod,{cfpNode:r}),t.show_docfrag&&t.container&&c){var u=g(rt,{opts:{cf_amount:e.opts.cf_amount,cf_amount_param:e.opts.cf_amount_param}},t);t.container.appendChild(u)}})),Object.assign(this.mod,{osc_1:a,osc_2:i});var s=this;return t.show_docfrag&&(window.LinearCrossfading=this.mod,s=rt=_(this,t)),s}function it(t){var e=this.mod;[e.osc_1,e.osc_2].forEach((function(t){return t.start()}))}function ct(t){var e=this.mod,r=e.osc_1,n=e.osc_2,o=e.cfpNode;[r,n].forEach((function(t){return t.stop()})),y(t.container,o),rt=null}var st=null,ut=function(t){Object.assign(this,{mod:{},opts:Object.assign({osc1_freq:2,osc1_type:"sawtooth",osc2_freq:3.5,osc2_type:"square",cf_amount:{value:.2,max:1},cf_mix_length:{value:.01,step:.01}},t||{}),init:lt.bind(this),start:ft.bind(this),stop:dt.bind(this)})};const pt=ut;function lt(t){var e=this,n=t.ctx,o=t.master_g,a=n.createOscillator();a.frequency.value=this.opts.osc1_freq,this.opts.osc1_freq_param=a.frequency,a.type=this.opts.osc1_type,this.opts.osc1_type_enum=v(a);var i=n.createOscillator();i.frequency.value=this.opts.osc2_freq,this.opts.osc2_freq_param=i.frequency,i.type=this.opts.osc2_type,this.opts.osc2_type_enum=v(i);var c=new L(new URL(r(419),r.b));n.audioWorklet.addModule(c).then((function(){var r=new AudioWorkletNode(n,"mix-crossfading-processor",{numberOfInputs:2,numberOfOutputs:2}),c=!0;e.opts.cf_amount_param&&(c=!1);var s=r.parameters.get("amount");s.value=e.opts.cf_amount.value,e.opts.cf_amount_param=s;var u=r.parameters.get("mix_length");if(u.value=e.opts.cf_mix_length.value,e.opts.cf_mix_length_param=u,a.connect(r),i.connect(r,0,1),r.connect(o),Object.assign(e.mod,{cfpNode:r}),t.show_docfrag&&t.container&&c){var p=g(st,{opts:{cf_amount:e.opts.cf_amount,cf_amount_param:e.opts.cf_amount_param,cf_mix_length:e.opts.cf_mix_length,cf_mix_length_param:e.opts.cf_mix_length_param}},t);t.container.appendChild(p)}})),Object.assign(this.mod,{osc_1:a,osc_2:i});var s=this;return t.show_docfrag&&(window.MixCrossfading=this.mod,s=st=_(this,t)),s}function ft(t){var e=this.mod;[e.osc_1,e.osc_2].forEach((function(t){return t.start()}))}function dt(t){var e=this.mod,r=e.osc_1,n=e.osc_2,o=e.cfpNode;[r,n].forEach((function(t){return t.stop()})),y(t.container,o),st=null}var ht=function(t){return Object.assign(this,{mod:{},opts:Object.assign({carrier_freq:220,carrier_type:"sine",modulator_freq:10,modulator_type:"sine",carrier_g:.8,modulator_g:2},t||{}),init:_t.bind(this),start:gt.bind(this),stop:vt.bind(this)})};const mt=ht;function _t(t){var e=t.ctx,r=t.master_g,n=e.createOscillator(),o=e.createGain(),a=e.createOscillator(),i=e.createGain();n.frequency.value=this.opts.carrier_freq,this.opts.carrier_freq_param=n.frequency,a.frequency.value=this.opts.modulator_freq,this.opts.modulator_freq_param=a.frequency,n.type=this.opts.carrier_type,this.opts.carrier_type_enum=v(n),a.type=this.opts.modulator_type,this.opts.modulator_type_enum=v(a),o.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=o.gain,i.gain.value=this.opts.modulator_g,this.opts.modulator_g_param=i.gain,a.connect(i).connect(o),n.connect(o).connect(r),Object.assign(this.mod,{carrier:n,c_g:o,modulator:a,m_g:i});var c=this;return t.show_docfrag&&(window.RM=this.mod,c=_(this,t)),c}function gt(t){var e=this.mod;[e.carrier,e.modulator].forEach((function(t){return t.start()}))}function vt(t){var e=this.mod;[e.carrier,e.modulator].forEach((function(t){return t.stop()}))}var yt=function(t){Object.assign(this,{mod:{},opts:Object.assign({carrier_freq:220,carrier_type:"sine",carrier_g:1,shaping_amount:4,shaping_harmonics:[.1,.1,.1,.1,.1],shaping_fn:"distortion"},t||{}),init:qt.bind(this),start:Ct.bind(this),stop:Lt.bind(this)})};const bt=yt;function qt(t){var e=this,r=t.ctx,n=t.master_g,o=r.createWaveShaper(),a=r.createOscillator(),i=r.createGain();a.frequency.value=this.opts.carrier_freq,this.opts.carrier_freq_param=a.frequency,a.type=this.opts.carrier_type,this.opts.carrier_type_enum=v(a),i.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=i.gain;var c=this.opts.shaping_harmonics.length,s=this.opts.shaping_harmonics,u=this.opts.shaping_amount,p={distortion:{fn:Ot,set_args:function(t,r){return t.bind(null,parseFloat(r||e.opts.shaping_amount))}},chebishev:{fn:xt,set_args:function(t,e){return Object.assign(t.bind(null,c,s.map((function(t){return t*parseFloat(e||1)}))),Object.assign({},Et))}}},l=p[this.opts.shaping_fn];o.curve=wt(r,l.set_args(l.fn)),this.opts.shaping_harmonics_enum=s.map((function(t,e){return{values:"int",value:t,onchange:function(t){s[e]=parseFloat(t),o.curve=wt(r,l.set_args(l.fn,u))}}})),this.opts.shaping_amount_enum={values:"int",onchange:function(t){u=parseFloat(t),o.curve=wt(r,l.set_args(l.fn,u))}},this.opts.shaping_fn_enum={values:["distortion","chebishev"],onchange:function(t){l=p[t],o.curve=wt(r,l.set_args(l.fn,u))}},a.connect(i).connect(o).connect(n),Object.assign(this.mod,{carrier:a,c_g:i,ws:o});var f=this;return t.show_docfrag&&(window.WS=this.mod,f=_(this,t)),f}function wt(t,e){var r=t.sampleRate,n=new Float32Array(r);e.init_processing&&e.init_processing(e);for(var o=0;o<r;o++){var a=2*o/r-1;n[o]=e(a),e.step_processing&&e.step_processing(e,n[o])}return e.post_processing?e.post_processing(e,n):n}function Ot(t,e){var r="number"==typeof t?t:50;return(3+r)*e*20*(Math.PI/180)/(Math.PI+r*Math.abs(e))}function xt(t,e,r){var n=function(r){for(var n=jt(1,r),o=2;o<t+2;o++)n+=e[o-2]*jt(o,r);return n};return n(r)-n(0)}var Et={f1_max:Number.NEGATIVE_INFINITY,init_processing:function(t){return t.f1_max=Number.NEGATIVE_INFINITY},step_processing:function(t,e){return t.f1_max=Math.max(t.f1_max,e)},post_processing:function(t,e){for(var r=0;r<e.length;r++)e[r]/=t.f1_max;return e}};function jt(t,e){return 0===t?1:1===t?e:2*e*jt(t-1,e)+jt(t-2,e)}function Ct(t){this.mod.carrier.start()}function Lt(t){this.mod.carrier.stop()}var St=function(t){Object.assign(this,{mod:{},opts:Object.assign({modulator1_freq:7,modulator1_type:"sine",d1_gain:40,modulator2_freq:22,modulator2_type:"sine",d2_gain:20,mods_g:1,carrier_freq:100,carrier_type:"sine",carrier_g:1},t||{}),init:At.bind(this),start:Tt.bind(this),stop:Ft.bind(this)})};const Mt=St;function At(t){var e=t.ctx,r=t.master_g,n=e.createOscillator(),o=e.createGain(),a=e.createOscillator(),i=e.createGain(),c=e.createGain(),s=e.createOscillator(),u=e.createGain();return n.frequency.value=this.opts.modulator1_freq,this.opts.modulator1_freq_param=n.frequency,o.gain.value=this.opts.d1_gain,this.opts.d1_gain_param=o.gain,a.frequency.value=this.opts.modulator2_freq,this.opts.modulator2_freq_param=a.frequency,i.gain.value=this.opts.d2_gain,this.opts.d2_gain_param=i.gain,c.gain.value=this.opts.mods_g,this.opts.mods_g_param=c.gain,s.frequency.value=this.opts.carrier_freq,this.opts.carrier_freq_param=s.frequency,u.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=u.gain,s.type=this.opts.carrier_type,this.opts.carrier_type_enum=v(s),n.type=this.opts.modulator1_type,this.opts.modulator1_type_enum=v(n),a.type=this.opts.modulator2_type,this.opts.modulator2_type_enum=v(a),n.connect(o),a.connect(i),o.connect(c),i.connect(c.gain),c.connect(s.frequency),s.connect(u),u.connect(r),Object.assign(this.mod,{m1:n,d1:o,m2:a,d2:i,mods_g:c,c:s,g:u}),window.FM1c2m=this.mod,t.show_docfrag?_(this,t):this}function Tt(t){var e=this.mod;[e.m1,e.m2,e.c].forEach((function(t){return t.start()}))}function Ft(t){var e=this.mod;[e.m1,e.m2,e.c].forEach((function(t){return t.stop()}))}var Gt=function(t){Object.assign(this,{mod:{},opts:Object.assign({modulator1_freq:7,modulator1_type:"sine",d1_gain:40,modulator2_freq:22,modulator2_type:"sine",d2_gain:20,mods_g:1,carrier_freq:100,carrier_type:"sine",carrier_g:1},t||{}),init:Nt.bind(this),start:It.bind(this),stop:Pt.bind(this)})};const kt=Gt;function Nt(t){var e=t.ctx,r=t.master_g,n=e.createOscillator(),o=e.createGain(),a=e.createOscillator(),i=e.createGain(),c=e.createGain(),s=e.createOscillator(),u=e.createGain();return n.frequency.value=this.opts.modulator1_freq,this.opts.modulator1_freq_param=n.frequency,o.gain.value=this.opts.d1_gain,this.opts.d1_gain_param=o.gain,a.frequency.value=this.opts.modulator2_freq,this.opts.modulator2_freq_param=a.frequency,i.gain.value=this.opts.d2_gain,this.opts.d2_gain_param=i.gain,c.gain.value=this.opts.mods_g,this.opts.mods_g_param=c.gain,s.frequency.value=this.opts.carrier_freq,this.opts.carrier_freq_param=s.frequency,s.type=this.opts.carrier_type,this.opts.carrier_type_enum=v(s),n.type=this.opts.modulator1_type,this.opts.modulator1_type_enum=v(n),a.type=this.opts.modulator2_type,this.opts.modulator2_type_enum=v(a),u.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=u.gain,n.connect(o),a.connect(i),o.connect(a.frequency),i.connect(c),c.connect(s.frequency),s.connect(u),u.connect(r),Object.assign(this.mod,{m1:n,d1:o,m2:a,d2:i,mods_g:c,c:s,g:u}),window.FM1c2sm=this.mod,t.show_docfrag?_(this,t):this}function It(t){var e=this.mod;[e.m1,e.m2,e.c].forEach((function(t){return t.start()}))}function Pt(t){var e=this.mod;[e.m1,e.m2,e.c].forEach((function(t){return t.stop()}))}var Rt=function(t){Object.assign(this,{mod:{},opts:Object.assign({modulator_freq:7,modulator_type:"sine",d_gain:40,carrier1_freq:200,carrier1_type:"sine",carrier2_freq:40,carrier2_type:"sine",carrier_g:.1},t||{}),init:Vt.bind(this),start:Dt.bind(this),stop:Ut.bind(this)})};const Wt=Rt;function Vt(t){var e=t.ctx,r=t.master_g,n=e.createOscillator(),o=e.createGain(),a=e.createOscillator(),i=e.createOscillator(),c=e.createGain();return n.frequency.value=this.opts.modulator_freq,this.opts.modulator_freq_param=n.frequency,o.gain.value=this.opts.d_gain,this.opts.d_gain_param=o.gain,a.frequency.value=this.opts.carrier1_freq,this.opts.carrier1_freq_param=a.frequency,i.frequency.value=this.opts.carrier2_freq,this.opts.carrier2_freq_param=i.frequency,c.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=c.gain,n.type=this.opts.modulator_type,this.opts.modulator_type_enum=v(n),a.type=this.opts.carrier1_type,this.opts.carrier1_type_enum=v(a),i.type=this.opts.carrier2_type,this.opts.carrier2_type_enum=v(i),n.connect(o),o.connect(a.frequency),o.connect(i.frequency),a.connect(c),i.connect(c.gain),c.connect(r),Object.assign(this.mod,{m:n,d:o,c1:a,c2:i,g:c}),window.FM2c1m=this.mod,t.show_docfrag?_(this,t):this}function Dt(t){var e=this.mod;[e.m,e.c1,e.c2].forEach((function(t){return t.start()}))}function Ut(t){var e=this.mod;[e.m,e.c1,e.c2].forEach((function(t){return t.stop()}))}var Ht=function(t){Object.assign(this,{mod:{},opts:Object.assign({m1_carrier_freq:80,m1_modulatr_freq:20,m1_d_gain:10,m1_carrier_g:.8,m2_carrier_freq:120,m2_modulator_freq:22,m2_d_gain:10,m2_carrier_g:.8,inst_g:1},t||{}),init:Yt.bind(this),start:$t.bind(this),stop:zt.bind(this)})};const Bt=Ht;function Yt(t){var e=t.ctx,r=t.master_g,n=e.createGain(),o=new U({carrier_freq:this.opts.m1_carrier_freq,modulator_freq:this.opts.m1_modulatr_freq,d_gain:this.opts.m1_d_gain,master_g:n,show_docfrag:t.show_docfrag}),a=new U({carrier_freq:this.opts.m2_carrier_freq,modulator_freq:this.opts.m2_modulator_freq,d_gain:this.opts.m2_d_gain,master_g:n.gain,show_docfrag:t.show_docfrag});n.gain.value=this.opts.inst_g;var i=o.init(t),c=a.init(t);return n.connect(r),Object.assign(this.mod,{m1:o,m2:a}),window.FMAcim=this.mod,t.show_docfrag?function(t,e,r,n){var o=new DocumentFragment;return[r,n].forEach((function(t,e){var r=document.createElement("div"),n=e+1;r.classList.add("main-container","opt-container","fm-acim","mod-"+n);var a=document.createElement("div");a.classList.add("label"),a.textContent="FM MOD "+n,r.appendChild(a),r.appendChild(t),o.appendChild(r)})),o}(0,0,i,c):this}function $t(t){var e=this;Object.keys(this.mod).forEach((function(t){var r=e.mod[t].mod;[r.carrier,r.modulator].forEach((function(t){return t.start()}))}))}function zt(t){var e=this;Object.keys(this.mod).forEach((function(t){var r=e.mod[t].mod;[r.carrier,r.modulator].forEach((function(t){return t.stop()}))}))}var Jt=function(t){Object.assign(this,{mod:{},opts:Object.assign({mod_g:1,carrier_freq:100,carrier_type:"sine",carrier_g:1},t||{}),init:Qt.bind(this),start:Xt.bind(this),stop:Zt.bind(this)})};const Kt=Jt;function Qt(t){var e=t.ctx,r=t.master_g,n=e.createGain(),o=e.createOscillator(),a=e.createGain();return n.gain.value=this.opts.mod_g,this.opts.mod_g_param=n.gain,o.frequency.value=this.opts.carrier_freq,this.opts.carrier_freq_param=o.frequency,o.type=this.opts.carrier_type,this.opts.carrier_type_enum=v(o),a.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=a.gain,o.connect(a),a.connect(n),n.connect(o.frequency),a.connect(r),Object.assign(this.mod,{c:o,g:a,mod_g:n}),window.FM_selfc=this.mod,t.show_docfrag?_(this,t):this}function Xt(t){this.mod.c.start()}function Zt(t){this.mod.c.stop()}function te(t){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},te(t)}function ee(){ee=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,o){var a=e&&e.prototype instanceof f?e:f,i=Object.create(a.prototype),c=new E(o||[]);return n(i,"_invoke",{value:q(t,r,c)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function d(){}function h(){}var m={};s(m,a,(function(){return this}));var _=Object.getPrototypeOf,g=_&&_(_(j([])));g&&g!==e&&r.call(g,a)&&(m=g);var v=h.prototype=f.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function o(n,a,i,c){var s=p(t[n],t,a);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==te(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){o("next",t,i,c)}),(function(t){o("throw",t,i,c)})):e.resolve(l).then((function(t){u.value=t,i(u)}),(function(t){return o("throw",t,i,c)}))}c(s.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function q(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=w(i,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=p(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function w(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),l;var o=p(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,l;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=h,n(v,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=s(h,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,c,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},y(b.prototype),s(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new b(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(v),s(v,c,"Generator"),s(v,a,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function re(t,e,r,n,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function ne(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){re(a,n,o,i,c,"next",t)}function c(t){re(a,n,o,i,c,"throw",t)}i(void 0)}))}}var oe={};oe.WS=u,oe.RM=s,oe.MixCrossfading=c,oe.LinearCrossfading=i,oe.FuzzyPhaser=a,oe.FM=o,oe.ChannelRouter2In6Out=n,oe.AudioMixCrossfading=e,oe.AM=t;var ae=oe,ie={};ie.FMselfc=h,ie.FMAcim=d,ie.FM2c1m=f,ie.FM1c2sm=l,ie.FM1c2m=p;var ce=ie,se={};window.addEventListener("load",(function(){var t=document.querySelector(".trigger-btn"),e=document.querySelector(".selector"),r=document.querySelector(".controls"),n=Object.keys(ae).concat(Object.keys(ce)).reduce((function(t,e){return t[e]=(ae[e]||ce[e]).default,t}),{});e.innerHTML=Object.keys(n).map((function(t){return'<option value="'+t+'">'+t+"</option>"})).join(""),e.selectedIndex=0;var o={},a=function(){},i=function(){},c=function(){},s=function(){o=new n[e.value],a=o.init,i=o.start,c=o.stop};e.addEventListener("change",s),s();var u,p,l=!1;t.addEventListener("click",ne(ee().mark((function t(){var n;return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l)console.info("Stopping module "+e.value+"..."),u.gain.setValueAtTime(u.gain.value,p.currentTime),u.gain.exponentialRampToValueAtTime(1e-9,p.currentTime+.25),setTimeout((function(){c(se),se.master_g.disconnect()}),300);else{for(se.ctx=se.ctx||new AudioContext,se.master_g=se.master_g||se.ctx.createGain(),se.master_g.connect(se.ctx.destination),se.show_docfrag=!0,se.container=r,u=se.master_g,p=se.ctx,console.info("Init module "+e.value+"..."),n=a(se);r.firstChild;)r.removeChild(r.firstChild);r.appendChild(n),console.info("Starting module "+e.value+"..."),u.gain.setValueAtTime(1e-7,p.currentTime),i(se),u.gain.exponentialRampToValueAtTime(1,p.currentTime+.25)}l=!l,e.disabled=l;case 3:case"end":return t.stop()}}),t)}))))}))})()})();