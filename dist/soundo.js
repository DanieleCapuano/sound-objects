!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.soundo=e():t.soundo=e()}(self,(()=>(()=>{"use strict";var t={m:{},d:(e,r)=>{for(var a in r)t.o(r,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:r[a]})},u:t=>t+".soundo.js"};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),t.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var r=t.g.document;if(!e&&r&&(r.currentScript&&(e=r.currentScript.src),!e)){var a=r.getElementsByTagName("script");a.length&&(e=a[a.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),t.b=document.baseURI||self.location.href;var e={};t.r(e),t.d(e,{default:()=>kt,instruments:()=>It,operators:()=>St});var r={};t.r(r),t.d(r,{AM:()=>y,default:()=>q});var a={};t.r(a),t.d(a,{Crossfading:()=>C,default:()=>x});var n={};t.r(n),t.d(n,{FM:()=>L,default:()=>G});var i={};t.r(i),t.d(i,{CHPhaser:()=>R,default:()=>V});var o={};t.r(o),t.d(o,{RM:()=>$,default:()=>z});var s={};t.r(s),t.d(s,{WS:()=>J,default:()=>K});var c={};t.r(c),t.d(c,{FM1c2m:()=>it,default:()=>ot});var u={};t.r(u),t.d(u,{FM1c2sm:()=>pt,default:()=>dt});var p={};t.r(p),t.d(p,{FM2c1m:()=>lt,default:()=>ft});var d={};t.r(d),t.d(d,{FMAcim:()=>qt,default:()=>bt});var m={};t.r(m),t.d(m,{FMselfc:()=>jt,default:()=>Ct});var _=function(t,e,r){var a=new DocumentFragment;return Object.keys(t.opts).forEach((function(r){var n=f(t,e,r,"param"),i=f(t,e,r,"enum");n&&a.appendChild(n),i&&a.appendChild(i)})),r&&a.appendChild(r(t,e)),a},h=function(t,e,r,a){var n=t||new DocumentFragment;return Object.keys(e.opts).forEach((function(t){var a=f(e,r,t,"param"),i=f(e,r,t,"enum");a&&n.appendChild(a),i&&n.appendChild(i)})),a&&n.appendChild(a(e,r)),n},l=function(t){return{values:["sine","triangle","square","sawtooth"],onchange:function(e){return t.type=e}}};function f(t,e,r,a){var n={param:g,enum:v},i=t.opts[r+"_"+a];if(!i)return null;var o=document.createElement("div");return o.classList.add("container"),(i=Array.isArray(i)?i:[i]).forEach((function(s,c){var u=n[a](t,e,r,s,1===i.length?void 0:c);o.appendChild(u)})),o}function g(t,e,r,a,n){var i=e.ctx,o=a.value||t.opts[r],s=document.createElement("div");s.classList.add("container","param",r);var c=document.createElement("div");c.classList.add("label"),c.textContent=r+(void 0!==n?"-"+n:"");var u=document.createElement("input");return u.classList.add("input-val"),u.setAttribute("type","number"),u.setAttribute("min","0"),u.setAttribute("step","0.1"),u.value=o,u.addEventListener("change",(function(){var e=t.opts[r+"_param"];e&&(e.cancelScheduledValues(i.currentTime),e.setValueAtTime(u.value,i.currentTime))})),s.appendChild(c),s.appendChild(u),s}function v(t,e,r,a,n){var i=a.value||t.opts[r],o=document.createElement("div");o.classList.add("container","enum",r);var s=document.createElement("div");s.classList.add("label"),s.textContent=r+(void 0!==n?"-"+n:"");var c=null;return"int"===a.values?((c=document.createElement("input")).classList.add("input-val"),c.setAttribute("type","number"),c.setAttribute("min","0"),c.setAttribute("step","0.1"),c.value=i,c.addEventListener("change",(function(){a.onchange(c.value)}))):Array.isArray(a.values)&&(c=document.createElement("select"),a.values.forEach((function(t){var e=document.createElement("option");e.value=t,e.textContent=t,c.appendChild(e)})),c.addEventListener("change",(function(){a.onchange(c.value)}))),c?(o.appendChild(s),o.appendChild(c),o):null}var y=function(t){Object.assign(this,{mod:{},opts:Object.assign({carrier_freq:220,carrier_type:"sine",modulator_freq:10,modulator_type:"sine",carrier_g:.8,modulator_g:2},t||{}),init:b.bind(this),start:O.bind(this),stop:w.bind(this)})};const q=y;function b(t){var e=t.ctx,r=t.master_g,a=e.createGain(),n=e.createOscillator(),i=e.createGain(),o=e.createOscillator(),s=e.createGain();return n.frequency.value=this.opts.carrier_freq,this.opts.carrier_freq_param=n.frequency,o.frequency.value=this.opts.modulator_freq,this.opts.modulator_freq_param=o.frequency,n.type=this.opts.carrier_type,this.opts.carrier_type_enum=l(n),o.type=this.opts.modulator_type,this.opts.modulator_type_enum=l(o),i.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=i.gain,s.gain.value=this.opts.modulator_g,this.opts.modulator_g_param=s.gain,o.connect(s).connect(i.gain),n.connect(i).connect(a).connect(r),Object.assign(this.mod,{g:a,carrier:n,c_g:i,modulator:o,m_g:s}),window.AM=this.mod,t.show_docfrag?_(this,t):this}function O(t){var e=this.mod;[e.carrier,e.modulator].forEach((function(t){return t.start()}))}function w(t){var e=this.mod;[e.carrier,e.modulator].forEach((function(t){return t.stop()}))}function E(t){return t}var j=null,C=function(t){Object.assign(this,{mod:{},opts:Object.assign({osc1_freq:220,osc1_type:"sine",osc2_freq:110,osc2_type:"sine",cf_amount:.5},t||{}),init:F.bind(this),start:M.bind(this),stop:A.bind(this)})};const x=C;function F(e){var r=this,a=e.ctx,n=e.master_g,i=a.createOscillator();i.frequency.value=this.opts.osc1_freq,this.opts.osc1_freq_param=i.frequency,i.type=this.opts.osc1_type,this.opts.osc1_type_enum=l(i);var o=a.createOscillator();o.frequency.value=this.opts.osc2_freq,this.opts.osc2_freq_param=o.frequency,o.type=this.opts.osc2_type,this.opts.osc2_type_enum=l(o);var s=new E(new URL(t.p+t.u(694),t.b));a.audioWorklet.addModule(s).then((function(){var t=new AudioWorkletNode(a,"crossfading-processor",{numberOfInputs:2,numberOfOutputs:2}),s=t.parameters.get("amount");if(s.value=r.opts.cf_amount,r.opts.cf_amount_param=s,i.connect(t),o.connect(t,0,1),t.connect(n),Object.assign(r.mod,{cfpNode:t}),e.show_docfrag&&e.container){var c=h(j,{opts:{cf_amount:r.opts.cf_amount,cf_amount_param:r.opts.cf_amount_param}},e);e.container.appendChild(c)}})),window.Crossfading=this.mod,Object.assign(this.mod,{osc_1:i,osc_2:o});var c=this;return e.show_docfrag&&(c=j=_(this,e)),c}function M(t){var e=this.mod;[e.osc_1,e.osc_2].forEach((function(t){return t.start()}))}function A(t){var e=this.mod;[e.osc_1,e.osc_2].forEach((function(t){return t.stop()}))}var L=function(t){Object.assign(this,{mod:{},opts:Object.assign({carrier_freq:220,carrier_type:"sine",modulator_freq:10,modulator_type:"sine",d_gain:40,carrier_g:.8},t||{}),init:T.bind(this),start:S.bind(this),stop:I.bind(this)})};const G=L;function T(t){var e=this,r=t.ctx,a=t.master_g,n=r.createOscillator(),i=r.createGain(),o=r.createOscillator(),s=r.createGain();return n.frequency.value=this.opts.carrier_freq,o.frequency.value=this.opts.modulator_freq,this.opts.modulator_freq_param=o.frequency,n.type=this.opts.carrier_type,this.opts.carrier_type_enum=l(n),o.type=this.opts.modulator_type,this.opts.modulator_type_enum=l(o),s.gain.value=this.opts.d_gain,this.opts.d_gain_param=s.gain,i.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=i.gain,o.connect(s).connect(n.frequency),n.connect(i).connect(a),Object.assign(this.mod,{carrier:n,c_g:i,modulator:o,d:s,change_i:function(t,e){return o.frequency.value=e||o.frequency.value,s.gain.value=o.frequency.value*t,{d_gain:s.gain.value}},change_i_exp:function(t,e,a){o.frequency.value=e||o.frequency.value;var n=o.frequency.value*t;return s.gain.cancelScheduledValues(r.currentTime),s.gain.setValueAtTime(s.gain.value,r.currentTime),s.gain.exponentialRampToValueAtTime(n,r.currentTime+a),{d_gain:s.gain.value}},change_pitch:function(t){n.frequency.value=t;var r=t*o.frequency.value/n.frequency.value,a=s.gain.value/o.frequency.value;return{mod_freq:r,ratio_tobe_kept:a,d_gain:e.mod.change_i(a,r).d_gain}},change_pitch_exp:function(t,a){n.frequency.setValueAtTime(n.frequency.value,r.currentTime),n.frequency.exponentialRampToValueAtTime(t,r.currentTime+a);var i=t*o.frequency.value/n.frequency.value,c=s.gain.value/o.frequency.value;return{mod_freq:i,ratio_tobe_kept:c,d_gain:e.mod.change_i_exp(c,i,a).d_gain}}}),window.FM=this.mod,t.show_docfrag?_(this,t,k):this}function S(t){var e=this.mod;[e.carrier,e.modulator].forEach((function(t){return t.start()}))}function I(t){var e=this.mod;[e.carrier,e.modulator].forEach((function(t){return t.stop()}))}function k(t,e){var r=new DocumentFragment;return["change_i","change_pitch"].forEach((function(e){var a=document.createElement("div");a.classList.add("container");var n=document.createElement("div");n.classList.add("label"),n.textContent=e;var i="change_i"===e?function(){var e=document.createElement("div");return e.classList.add("container","container-opts","change-i"),["ratio","time"].forEach((function(r){var a=document.createElement("div");a.classList.add("opt-container",r);var n=document.createElement("div");n.textContent=r;var i=document.createElement("input");i.classList.add("input-val"),i.value="ratio"===r?t.mod.d.gain.value/t.mod.modulator.frequency.value:0,i.setAttribute("type","number"),i.setAttribute("min","0"),i.setAttribute("step","time"===r?"1":"0.1"),i.addEventListener("change",(function(){var r=N(e),a=parseInt(r.querySelector(".change-i > .time > .input-val").value),n=parseFloat(r.querySelector(".change-i > .ratio > .input-val").value),i=r.querySelector(".d_gain > .input-val"),o=t.mod.modulator.frequency.value,s=t.mod[a?"change_i_exp":"change_i"](n,o,a).d_gain;i.value=s})),a.appendChild(n),a.appendChild(i),e.appendChild(a)})),e}():function(){var e=document.createElement("div");return e.classList.add("container","container-opts","change-pitch"),["carrier_freq","time"].forEach((function(r){var a=document.createElement("div");a.classList.add("opt-container",r);var n=document.createElement("div");n.textContent=r;var i=document.createElement("input");i.classList.add("input-val"),i.value="carrier_freq"===r?t.mod.carrier.frequency.value:0,i.setAttribute("type","number"),i.setAttribute("min","0"),i.setAttribute("step","time"===r?"1":"0.1"),i.addEventListener("change",(function(){var r=N(e),a=parseInt(r.querySelector(".change-pitch > .time > .input-val").value),n=parseFloat(r.querySelector(".change-pitch > .carrier_freq > .input-val").value),i=r.querySelector(".change-i > .ratio > .input-val"),o=r.querySelector(".modulator_freq > .input-val"),s=r.querySelector(".d_gain > .input-val"),c=t.mod[a?"change_pitch_exp":"change_pitch"](n,a),u=c.ratio_tobe_kept,p=c.mod_freq,d=c.d_gain;i.value=u,o.value=p,s.value=d})),a.appendChild(n),a.appendChild(i),e.appendChild(a)})),e}();a.appendChild(n),a.appendChild(i),r.appendChild(a)})),r}function N(t){return t.classList.contains("controls")||t.classList.contains("main-container")?t:N(t.parentElement)}var P=null,R=function(t){Object.assign(this,{mod:{},opts:Object.assign({osc_freq:220,osc_type:"sine",chp_freq:5.7},t||{}),init:W.bind(this),start:D.bind(this),stop:U.bind(this)})};const V=R;function W(e){var r=this,a=e.ctx,n=e.master_g,i=new E(new URL(t.p+t.u(62),t.b));a.audioWorklet.addModule(i).then((function(){var t=new AudioWorkletNode(a,"ch-phaser-processor",{numberOfOutputs:1,outputChannelCount:[2]}),i=t.parameters.get("frequency");if(i.value=r.opts.chp_freq,r.opts.chp_freq_param=i,o.connect(t).connect(n),Object.assign(r.mod,{chpNode:t}),e.show_docfrag&&e.container){var s=h(P,{opts:{chp_freq:r.opts.chp_freq,chp_freq_param:r.opts.chp_freq_param}},e);e.container.appendChild(s)}}));var o=a.createOscillator();o.frequency.value=this.opts.osc_freq,this.opts.osc_freq_param=o.frequency,o.type=this.opts.osc_type,this.opts.osc_type_enum=l(o),window.CHPhaser=this.mod,Object.assign(this.mod,{osc:o});var s=this;return e.show_docfrag&&(s=P=_(this,e)),s}function D(t){this.mod.osc.start()}function U(t){this.mod.osc.stop()}var $=function(t){return Object.assign(this,{mod:{},opts:Object.assign({carrier_freq:220,carrier_type:"sine",modulator_freq:10,modulator_type:"sine",carrier_g:.8,modulator_g:2},t||{}),init:H.bind(this),start:Y.bind(this),stop:B.bind(this)})};const z=$;function H(t){var e=t.ctx,r=t.master_g,a=e.createOscillator(),n=e.createGain(),i=e.createOscillator(),o=e.createGain();return a.frequency.value=this.opts.carrier_freq,this.opts.carrier_freq_param=a.frequency,i.frequency.value=this.opts.modulator_freq,this.opts.modulator_freq_param=i.frequency,a.type=this.opts.carrier_type,this.opts.carrier_type_enum=l(a),i.type=this.opts.modulator_type,this.opts.modulator_type_enum=l(i),n.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=n.gain,o.gain.value=this.opts.modulator_g,this.opts.modulator_g_param=o.gain,i.connect(o).connect(n),a.connect(n).connect(r),Object.assign(this.mod,{carrier:a,c_g:n,modulator:i,m_g:o}),window.RM=this.mod,t.show_docfrag?_(this,t):this}function Y(t){var e=this.mod;[e.carrier,e.modulator].forEach((function(t){return t.start()}))}function B(t){var e=this.mod;[e.carrier,e.modulator].forEach((function(t){return t.stop()}))}var J=function(t){Object.assign(this,{mod:{},opts:Object.assign({carrier_freq:220,carrier_type:"sine",carrier_g:1,shaping_amount:4,shaping_harmonics:[.1,.1,.1,.1,.1],shaping_fn:"distortion"},t||{}),init:Q.bind(this),start:at.bind(this),stop:nt.bind(this)})};const K=J;function Q(t){var e=this,r=t.ctx,a=t.master_g,n=r.createWaveShaper(),i=r.createOscillator(),o=r.createGain();i.frequency.value=this.opts.carrier_freq,this.opts.carrier_freq_param=i.frequency,i.type=this.opts.carrier_type,this.opts.carrier_type_enum=l(i),o.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=o.gain;var s=this.opts.shaping_harmonics.length,c=this.opts.shaping_harmonics,u=this.opts.shaping_amount,p={distortion:{fn:Z,set_args:function(t,r){return t.bind(null,parseFloat(r||e.opts.shaping_amount))}},chebishev:{fn:tt,set_args:function(t,e){return Object.assign(t.bind(null,s,c.map((function(t){return t*parseFloat(e||1)}))),Object.assign({},et))}}},d=p[this.opts.shaping_fn];return n.curve=X(r,d.set_args(d.fn)),this.opts.shaping_harmonics_enum=c.map((function(t,e){return{values:"int",value:t,onchange:function(t){c[e]=parseFloat(t),n.curve=X(r,d.set_args(d.fn,u))}}})),this.opts.shaping_amount_enum={values:"int",onchange:function(t){u=parseFloat(t),n.curve=X(r,d.set_args(d.fn,u))}},this.opts.shaping_fn_enum={values:["distortion","chebishev"],onchange:function(t){d=p[t],n.curve=X(r,d.set_args(d.fn,u))}},i.connect(o).connect(n).connect(a),Object.assign(this.mod,{carrier:i,c_g:o,ws:n}),window.WS=this.mod,t.show_docfrag?_(this,t):this}function X(t,e){var r=t.sampleRate,a=new Float32Array(r);e.init_processing&&e.init_processing(e);for(var n=0;n<r;n++){var i=2*n/r-1;a[n]=e(i),e.step_processing&&e.step_processing(e,a[n])}return e.post_processing?e.post_processing(e,a):a}function Z(t,e){var r="number"==typeof t?t:50;return(3+r)*e*20*(Math.PI/180)/(Math.PI+r*Math.abs(e))}function tt(t,e,r){var a=function(r){for(var a=rt(1,r),n=2;n<t+2;n++)a+=e[n-2]*rt(n,r);return a};return a(r)-a(0)}var et={f1_max:Number.NEGATIVE_INFINITY,init_processing:function(t){return t.f1_max=Number.NEGATIVE_INFINITY},step_processing:function(t,e){return t.f1_max=Math.max(t.f1_max,e)},post_processing:function(t,e){for(var r=0;r<e.length;r++)e[r]/=t.f1_max;return e}};function rt(t,e){return 0===t?1:1===t?e:2*e*rt(t-1,e)+rt(t-2,e)}function at(t){this.mod.carrier.start()}function nt(t){this.mod.carrier.stop()}var it=function(t){Object.assign(this,{mod:{},opts:Object.assign({modulator1_freq:7,modulator1_type:"sine",d1_gain:40,modulator2_freq:22,modulator2_type:"sine",d2_gain:20,mods_g:1,carrier_freq:100,carrier_type:"sine",carrier_g:1},t||{}),init:st.bind(this),start:ct.bind(this),stop:ut.bind(this)})};const ot=it;function st(t){var e=t.ctx,r=t.master_g,a=e.createOscillator(),n=e.createGain(),i=e.createOscillator(),o=e.createGain(),s=e.createGain(),c=e.createOscillator(),u=e.createGain();return a.frequency.value=this.opts.modulator1_freq,this.opts.modulator1_freq_param=a.frequency,n.gain.value=this.opts.d1_gain,this.opts.d1_gain_param=n.gain,i.frequency.value=this.opts.modulator2_freq,this.opts.modulator2_freq_param=i.frequency,o.gain.value=this.opts.d2_gain,this.opts.d2_gain_param=o.gain,s.gain.value=this.opts.mods_g,this.opts.mods_g_param=s.gain,c.frequency.value=this.opts.carrier_freq,this.opts.carrier_freq_param=c.frequency,u.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=u.gain,c.type=this.opts.carrier_type,this.opts.carrier_type_enum=l(c),a.type=this.opts.modulator1_type,this.opts.modulator1_type_enum=l(a),i.type=this.opts.modulator2_type,this.opts.modulator2_type_enum=l(i),a.connect(n),i.connect(o),n.connect(s),o.connect(s.gain),s.connect(c.frequency),c.connect(u),u.connect(r),Object.assign(this.mod,{m1:a,d1:n,m2:i,d2:o,mods_g:s,c,g:u}),window.FM1c2m=this.mod,t.show_docfrag?_(this,t):this}function ct(t){var e=this.mod;[e.m1,e.m2,e.c].forEach((function(t){return t.start()}))}function ut(t){var e=this.mod;[e.m1,e.m2,e.c].forEach((function(t){return t.stop()}))}var pt=function(t){Object.assign(this,{mod:{},opts:Object.assign({modulator1_freq:7,modulator1_type:"sine",d1_gain:40,modulator2_freq:22,modulator2_type:"sine",d2_gain:20,mods_g:1,carrier_freq:100,carrier_type:"sine",carrier_g:1},t||{}),init:mt.bind(this),start:_t.bind(this),stop:ht.bind(this)})};const dt=pt;function mt(t){var e=t.ctx,r=t.master_g,a=e.createOscillator(),n=e.createGain(),i=e.createOscillator(),o=e.createGain(),s=e.createGain(),c=e.createOscillator(),u=e.createGain();return a.frequency.value=this.opts.modulator1_freq,this.opts.modulator1_freq_param=a.frequency,n.gain.value=this.opts.d1_gain,this.opts.d1_gain_param=n.gain,i.frequency.value=this.opts.modulator2_freq,this.opts.modulator2_freq_param=i.frequency,o.gain.value=this.opts.d2_gain,this.opts.d2_gain_param=o.gain,s.gain.value=this.opts.mods_g,this.opts.mods_g_param=s.gain,c.frequency.value=this.opts.carrier_freq,this.opts.carrier_freq_param=c.frequency,c.type=this.opts.carrier_type,this.opts.carrier_type_enum=l(c),a.type=this.opts.modulator1_type,this.opts.modulator1_type_enum=l(a),i.type=this.opts.modulator2_type,this.opts.modulator2_type_enum=l(i),u.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=u.gain,a.connect(n),i.connect(o),n.connect(i.frequency),o.connect(s),s.connect(c.frequency),c.connect(u),u.connect(r),Object.assign(this.mod,{m1:a,d1:n,m2:i,d2:o,mods_g:s,c,g:u}),window.FM1c2sm=this.mod,t.show_docfrag?_(this,t):this}function _t(t){var e=this.mod;[e.m1,e.m2,e.c].forEach((function(t){return t.start()}))}function ht(t){var e=this.mod;[e.m1,e.m2,e.c].forEach((function(t){return t.stop()}))}var lt=function(t){Object.assign(this,{mod:{},opts:Object.assign({modulator_freq:7,modulator_type:"sine",d_gain:40,carrier1_freq:200,carrier1_type:"sine",carrier2_freq:40,carrier2_type:"sine",carrier_g:.1},t||{}),init:gt.bind(this),start:vt.bind(this),stop:yt.bind(this)})};const ft=lt;function gt(t){var e=t.ctx,r=t.master_g,a=e.createOscillator(),n=e.createGain(),i=e.createOscillator(),o=e.createOscillator(),s=e.createGain();return a.frequency.value=this.opts.modulator_freq,this.opts.modulator_freq_param=a.frequency,n.gain.value=this.opts.d_gain,this.opts.d_gain_param=n.gain,i.frequency.value=this.opts.carrier1_freq,this.opts.carrier1_freq_param=i.frequency,o.frequency.value=this.opts.carrier2_freq,this.opts.carrier2_freq_param=o.frequency,s.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=s.gain,a.type=this.opts.modulator_type,this.opts.modulator_type_enum=l(a),i.type=this.opts.carrier1_type,this.opts.carrier1_type_enum=l(i),o.type=this.opts.carrier2_type,this.opts.carrier2_type_enum=l(o),a.connect(n),n.connect(i.frequency),n.connect(o.frequency),i.connect(s),o.connect(s.gain),s.connect(r),Object.assign(this.mod,{m:a,d:n,c1:i,c2:o,g:s}),window.FM2c1m=this.mod,t.show_docfrag?_(this,t):this}function vt(t){var e=this.mod;[e.m,e.c1,e.c2].forEach((function(t){return t.start()}))}function yt(t){var e=this.mod;[e.m,e.c1,e.c2].forEach((function(t){return t.stop()}))}var qt=function(t){Object.assign(this,{mod:{},opts:Object.assign({m1_carrier_freq:80,m1_modulatr_freq:20,m1_d_gain:10,m1_carrier_g:.8,m2_carrier_freq:120,m2_modulator_freq:22,m2_d_gain:10,m2_carrier_g:.8,inst_g:1},t||{}),init:Ot.bind(this),start:wt.bind(this),stop:Et.bind(this)})};const bt=qt;function Ot(t){var e=t.ctx,r=t.master_g,a=e.createGain(),n=new L({carrier_freq:this.opts.m1_carrier_freq,modulator_freq:this.opts.m1_modulatr_freq,d_gain:this.opts.m1_d_gain,master_g:a,show_docfrag:t.show_docfrag}),i=new L({carrier_freq:this.opts.m2_carrier_freq,modulator_freq:this.opts.m2_modulator_freq,d_gain:this.opts.m2_d_gain,master_g:a.gain,show_docfrag:t.show_docfrag});a.gain.value=this.opts.inst_g;var o=n.init(t),s=i.init(t);return a.connect(r),Object.assign(this.mod,{m1:n,m2:i}),window.FMAcim=this.mod,t.show_docfrag?function(t,e,r,a){var n=new DocumentFragment;return[r,a].forEach((function(t,e){var r=document.createElement("div"),a=e+1;r.classList.add("main-container","opt-container","fm-acim","mod-"+a);var i=document.createElement("div");i.classList.add("label"),i.textContent="FM MOD "+a,r.appendChild(i),r.appendChild(t),n.appendChild(r)})),n}(0,0,o,s):this}function wt(t){var e=this;Object.keys(this.mod).forEach((function(t){var r=e.mod[t].mod;[r.carrier,r.modulator].forEach((function(t){return t.start()}))}))}function Et(t){var e=this;Object.keys(this.mod).forEach((function(t){var r=e.mod[t].mod;[r.carrier,r.modulator].forEach((function(t){return t.stop()}))}))}var jt=function(t){Object.assign(this,{mod:{},opts:Object.assign({mod_g:1,carrier_freq:100,carrier_type:"sine",carrier_g:1},t||{}),init:xt.bind(this),start:Ft.bind(this),stop:Mt.bind(this)})};const Ct=jt;function xt(t){var e=t.ctx,r=t.master_g,a=e.createGain(),n=e.createOscillator(),i=e.createGain();return a.gain.value=this.opts.mod_g,this.opts.mod_g_param=a.gain,n.frequency.value=this.opts.carrier_freq,this.opts.carrier_freq_param=n.frequency,n.type=this.opts.carrier_type,this.opts.carrier_type_enum=l(n),i.gain.value=this.opts.carrier_g,this.opts.carrier_g_param=i.gain,n.connect(i),i.connect(a),a.connect(n.frequency),i.connect(r),Object.assign(this.mod,{c:n,g:i,mod_g:a}),window.FM_selfc=this.mod,t.show_docfrag?_(this,t):this}function Ft(t){this.mod.c.start()}function Mt(t){this.mod.c.stop()}var At={};At.WS=s,At.RM=o,At.FuzzyPhaser=i,At.FM=n,At.Crossfading=a,At.AM=r;var Lt=At,Gt={};Gt.FMselfc=m,Gt.FMAcim=d,Gt.FM2c1m=p,Gt.FM1c2sm=u,Gt.FM1c2m=c;var Tt=Gt,St={},It={};Object.keys(Lt).forEach((function(t){St[t]=opts[t].default})),Object.keys(Tt).forEach((function(t){It[t]=Tt[t].default}));const kt={operators:St,instruments:It};return e})()));